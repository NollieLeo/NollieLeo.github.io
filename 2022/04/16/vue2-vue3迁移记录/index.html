<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>vue2~vue3è¿ç§»è®°å½• | ç¿è€å¸ˆçš„åšå®¢</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#00abc0">
    
    
    <meta name="keywords" content="vue,vite">
    <meta name="description" content="è®°å½•vue2åˆ°vue3ç‰ˆæœ¬è¿ç§»äº‹é¡¹ å®˜æ–¹è¿ç§»æ–‡æ¡£  apiå˜åŒ–å…¨å±€apiå˜åŒ–new Vue â€”&gt; createApp ğŸš© â• vue2ä¸­æ²¡æœ‰app çš„æ¦‚å¿µï¼Œé€šè¿‡Vueçš„ç»Ÿä¸€æ„é€ å‡½æ•°è¿›è¡Œå…¨å±€çš„é…ç½®ï¼Œå•é¡µåº”ç”¨ä¸­æ— æ³•åˆ›å»ºå¤šä¸ªä¸åŒå…¨å±€é…ç½®çš„æ ¹åº”ç”¨ï¼ˆä¼šé€ æˆå…¨å±€é…ç½®æ±¡æŸ“ï¼‰ vue3ä¸­æœ‰äº†appæ¦‚å¿µï¼Œé€šè¿‡createAppåˆ›å»ºè¿”å›çš„å®ä¾‹æš´éœ²å…¨å±€apiï¼Œè§£å†³äº†vue2ä¸­çš„é—®é¢˜   Vue2 import">
<meta property="og:type" content="article">
<meta property="og:title" content="vue2~vue3è¿ç§»è®°å½•">
<meta property="og:url" content="https://github.com/NollieLeo/2022/04/16/vue2-vue3%E8%BF%81%E7%A7%BB%E8%AE%B0%E5%BD%95/index.html">
<meta property="og:site_name" content="ç¿è€å¸ˆçš„åšå®¢">
<meta property="og:description" content="è®°å½•vue2åˆ°vue3ç‰ˆæœ¬è¿ç§»äº‹é¡¹ å®˜æ–¹è¿ç§»æ–‡æ¡£  apiå˜åŒ–å…¨å±€apiå˜åŒ–new Vue â€”&gt; createApp ğŸš© â• vue2ä¸­æ²¡æœ‰app çš„æ¦‚å¿µï¼Œé€šè¿‡Vueçš„ç»Ÿä¸€æ„é€ å‡½æ•°è¿›è¡Œå…¨å±€çš„é…ç½®ï¼Œå•é¡µåº”ç”¨ä¸­æ— æ³•åˆ›å»ºå¤šä¸ªä¸åŒå…¨å±€é…ç½®çš„æ ¹åº”ç”¨ï¼ˆä¼šé€ æˆå…¨å±€é…ç½®æ±¡æŸ“ï¼‰ vue3ä¸­æœ‰äº†appæ¦‚å¿µï¼Œé€šè¿‡createAppåˆ›å»ºè¿”å›çš„å®ä¾‹æš´éœ²å…¨å±€apiï¼Œè§£å†³äº†vue2ä¸­çš„é—®é¢˜   Vue2 import">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://github.com/Users/leo/Library/Application%20Support/typora-user-images/image-20220416124853316.png">
<meta property="og:image" content="https://github.com/NollieLeo/2022/04/16/vue2-vue3%E8%BF%81%E7%A7%BB%E8%AE%B0%E5%BD%95/leo/Desktop/weng">
<meta property="article:published_time" content="2022-04-16T02:59:12.000Z">
<meta property="article:modified_time" content="2022-04-24T07:28:36.341Z">
<meta property="article:author" content="Mr.Weng">
<meta property="article:tag" content="vue">
<meta property="article:tag" content="vite">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/Users/leo/Library/Application%20Support/typora-user-images/image-20220416124853316.png">
    
        <link rel="alternate" type="application/atom+xml" title="ç¿è€å¸ˆçš„åšå®¢" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Mr.Weng</h5>
          <a href="mailto:736653759@qq.com" title="736653759@qq.com" class="mail">736653759@qq.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                ä¸»é¡µ
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/nollieleo" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">vue2~vue3è¿ç§»è®°å½•</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="è¾“å…¥æ„Ÿå…´è¶£çš„å…³é”®å­—">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">vue2~vue3è¿ç§»è®°å½•</h1>
        <h5 class="subtitle">
            
                <time datetime="2022-04-16T02:59:12.000Z" itemprop="datePublished" class="page-time">
  2022-04-16
</time>


            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#apiå˜åŒ–"><span class="post-toc-number">1.</span> <span class="post-toc-text">apiå˜åŒ–</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#å…¨å±€apiå˜åŒ–"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">å…¨å±€apiå˜åŒ–</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#new-Vue-â€”-gt-createApp-ğŸš©-â•"><span class="post-toc-number">1.1.1.</span> <span class="post-toc-text">new Vue â€”&gt; createApp ğŸš© â•</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#internal-Apis-ğŸš©"><span class="post-toc-number">1.1.2.</span> <span class="post-toc-text">internal Apis  ğŸš©</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#app-config"><span class="post-toc-number">1.1.3.</span> <span class="post-toc-text">app.config</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#globalProperties-ğŸš©â•"><span class="post-toc-number">1.1.3.1.</span> <span class="post-toc-text">globalProperties  ğŸš©â•</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#devtools"><span class="post-toc-number">1.1.3.2.</span> <span class="post-toc-text">devtools</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#errorHandler"><span class="post-toc-number">1.1.3.3.</span> <span class="post-toc-text">errorHandler</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#warnHandler"><span class="post-toc-number">1.1.3.4.</span> <span class="post-toc-text">warnHandler</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#isCustomElement-â•"><span class="post-toc-number">1.1.3.5.</span> <span class="post-toc-text">isCustomElement â•</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#optionMergeStrategies"><span class="post-toc-number">1.1.3.6.</span> <span class="post-toc-text">optionMergeStrategies</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#ã€è‡ªå®šä¹‰é€‰é¡¹åˆå¹¶ç­–ç•¥ã€‘mixin"><span class="post-toc-number">1.1.3.6.1.</span> <span class="post-toc-text">ã€è‡ªå®šä¹‰é€‰é¡¹åˆå¹¶ç­–ç•¥ã€‘mixin</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#performance"><span class="post-toc-number">1.1.3.7.</span> <span class="post-toc-text">performance</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#app-directive"><span class="post-toc-number">1.1.4.</span> <span class="post-toc-text">app.directive</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#app-unmount-ğŸš©â•"><span class="post-toc-number">1.1.5.</span> <span class="post-toc-text">app.unmount ğŸš©â•</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#app-component"><span class="post-toc-number">1.1.6.</span> <span class="post-toc-text">app.component</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#watch"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">watch</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#emits-â•"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">emits â•</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ä¾èµ–æ³¨å…¥provide-inject"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">ä¾èµ–æ³¨å…¥provide&#x2F;inject</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#åŸºç¡€ä½¿ç”¨æ–¹æ³•"><span class="post-toc-number">1.4.1.</span> <span class="post-toc-text">åŸºç¡€ä½¿ç”¨æ–¹æ³•</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#å“åº”å¼æ–¹æ³•-ğŸš©â•"><span class="post-toc-number">1.4.2.</span> <span class="post-toc-text">å“åº”å¼æ–¹æ³•  ğŸš©â•</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#å¼Šç«¯"><span class="post-toc-number">1.4.2.1.</span> <span class="post-toc-text">å¼Šç«¯</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#defineAsyncComponent-å¼‚æ­¥ç»„ä»¶"><span class="post-toc-number">1.5.</span> <span class="post-toc-text">defineAsyncComponent(å¼‚æ­¥ç»„ä»¶)</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#ç”Ÿå‘½å‘¨æœŸå‡½æ•°"><span class="post-toc-number">2.</span> <span class="post-toc-text">ç”Ÿå‘½å‘¨æœŸå‡½æ•°</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ä¸-2-x-ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸç›¸å¯¹åº”çš„ç»„åˆå¼-API-ğŸš©â•"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">ä¸ 2.x ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸç›¸å¯¹åº”çš„ç»„åˆå¼ API ğŸš©â•</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#éç»„åˆå¼api"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">éç»„åˆå¼api</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#å†…ç½®æŒ‡ä»¤å˜åŒ–"><span class="post-toc-number">3.</span> <span class="post-toc-text">å†…ç½®æŒ‡ä»¤å˜åŒ–</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#v-model-ğŸš©"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">v-model ğŸš©</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ç»„ä»¶ä½¿ç”¨"><span class="post-toc-number">3.1.1.</span> <span class="post-toc-text">ç»„ä»¶ä½¿ç”¨</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#v-is-ğŸš©â•"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">v-is ğŸš©â•</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#v-slot-ğŸš©â•"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">v-slot ğŸš©â•</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#è‡ªå®šä¹‰æŒ‡ä»¤å˜åŒ–-ğŸš©â•"><span class="post-toc-number">4.</span> <span class="post-toc-text">è‡ªå®šä¹‰æŒ‡ä»¤å˜åŒ– ğŸš©â•</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#å†…ç½®ç»„ä»¶"><span class="post-toc-number">5.</span> <span class="post-toc-text">å†…ç½®ç»„ä»¶</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#teleport-ğŸš©â•"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">teleport ğŸš©â•</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Suspense-ğŸš©â•"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">Suspense ğŸš©â•</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Fragments-ğŸš©â•"><span class="post-toc-number">5.3.</span> <span class="post-toc-text">Fragments ğŸš©â•</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#ç›¸åº”å¼ç³»ç»Ÿ-ğŸš©ğŸš©ğŸš©"><span class="post-toc-number">6.</span> <span class="post-toc-text">ç›¸åº”å¼ç³»ç»Ÿ ğŸš©ğŸš©ğŸš©</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#å“åº”å¼ç³»ç»Ÿ-API"><span class="post-toc-number">6.1.</span> <span class="post-toc-text">å“åº”å¼ç³»ç»Ÿ API</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#reactive"><span class="post-toc-number">6.1.1.</span> <span class="post-toc-text">reactive</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ref"><span class="post-toc-number">6.1.2.</span> <span class="post-toc-text">ref</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#é™·é˜±"><span class="post-toc-number">6.1.2.1.</span> <span class="post-toc-text">é™·é˜±</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#å¿ƒæ™ºè´Ÿæ‹…ä¸Š-ref-vs-reactive"><span class="post-toc-number">6.1.2.2.</span> <span class="post-toc-text">å¿ƒæ™ºè´Ÿæ‹…ä¸Š ref  vs  reactive</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#readonly"><span class="post-toc-number">6.1.3.</span> <span class="post-toc-text">readonly</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#reactiveå“åº”å¼ç³»ç»Ÿå·¥å…·é›†"><span class="post-toc-number">6.2.</span> <span class="post-toc-text">reactiveå“åº”å¼ç³»ç»Ÿå·¥å…·é›†</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#isProxy"><span class="post-toc-number">6.2.1.</span> <span class="post-toc-text">isProxy</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#isReactive"><span class="post-toc-number">6.2.2.</span> <span class="post-toc-text">isReactive</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#isReadonly"><span class="post-toc-number">6.2.3.</span> <span class="post-toc-text">isReadonly</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#reactiveé«˜çº§å“åº”å¼ç³»ç»ŸAPI"><span class="post-toc-number">6.3.</span> <span class="post-toc-text">reactiveé«˜çº§å“åº”å¼ç³»ç»ŸAPI</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#toRaw"><span class="post-toc-number">6.3.1.</span> <span class="post-toc-text">toRaw</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#markRaw"><span class="post-toc-number">6.3.2.</span> <span class="post-toc-text">markRaw</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#markRawæ³¨æ„ç‚¹"><span class="post-toc-number">6.3.2.1.</span> <span class="post-toc-text">markRawæ³¨æ„ç‚¹</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#shallowReactive"><span class="post-toc-number">6.3.3.</span> <span class="post-toc-text">shallowReactive</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#shallowReadonly"><span class="post-toc-number">6.3.4.</span> <span class="post-toc-text">shallowReadonly</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ref-å“åº”å¼ç³»ç»Ÿå·¥å…·é›†"><span class="post-toc-number">6.4.</span> <span class="post-toc-text">ref å“åº”å¼ç³»ç»Ÿå·¥å…·é›†</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#unref"><span class="post-toc-number">6.4.1.</span> <span class="post-toc-text">unref</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#toRef"><span class="post-toc-number">6.4.2.</span> <span class="post-toc-text">toRef</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#toRefs"><span class="post-toc-number">6.4.3.</span> <span class="post-toc-text">toRefs</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#isRef"><span class="post-toc-number">6.4.4.</span> <span class="post-toc-text">isRef</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ref-é«˜çº§å“åº”å¼ç³»ç»ŸAPI"><span class="post-toc-number">6.5.</span> <span class="post-toc-text">ref é«˜çº§å“åº”å¼ç³»ç»ŸAPI</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#customRef"><span class="post-toc-number">6.5.1.</span> <span class="post-toc-text">customRef</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#shallowRef"><span class="post-toc-number">6.5.2.</span> <span class="post-toc-text">shallowRef</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#triggerRef-ã€ä¸shallowRefé…åˆã€‘"><span class="post-toc-number">6.5.3.</span> <span class="post-toc-text">triggerRef ã€ä¸shallowRefé…åˆã€‘</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Composition-API"><span class="post-toc-number">7.</span> <span class="post-toc-text">Composition API</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#setup"><span class="post-toc-number">7.1.</span> <span class="post-toc-text">setup</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#è°ƒç”¨æ—¶æœº"><span class="post-toc-number">7.1.1.</span> <span class="post-toc-text">è°ƒç”¨æ—¶æœº</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#å‚æ•°"><span class="post-toc-number">7.1.2.</span> <span class="post-toc-text">å‚æ•°</span></a></li></ol></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-vue2-vue3è¿ç§»è®°å½•"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">vue2~vue3è¿ç§»è®°å½•</h1>
        <div class="post-meta">
            <time class="post-time" title="2022-04-16 10:59:12" datetime="2022-04-16T02:59:12.000Z"  itemprop="datePublished">2022-04-16</time>

            


            
<span id="busuanzi_container_page_pv" title="æ–‡ç« æ€»é˜…è¯»é‡" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <blockquote>
<p>è®°å½•vue2åˆ°vue3ç‰ˆæœ¬è¿ç§»äº‹é¡¹</p>
<p><a href="https://v3.cn.vuejs.org/guide/migration/introduction.html" target="_blank" rel="noopener">å®˜æ–¹è¿ç§»æ–‡æ¡£</a></p>
</blockquote>
<h1 id="apiå˜åŒ–"><a href="#apiå˜åŒ–" class="headerlink" title="apiå˜åŒ–"></a>apiå˜åŒ–</h1><h2 id="å…¨å±€apiå˜åŒ–"><a href="#å…¨å±€apiå˜åŒ–" class="headerlink" title="å…¨å±€apiå˜åŒ–"></a>å…¨å±€apiå˜åŒ–</h2><h3 id="new-Vue-â€”-gt-createApp-ğŸš©-â•"><a href="#new-Vue-â€”-gt-createApp-ğŸš©-â•" class="headerlink" title="new Vue â€”&gt; createApp ğŸš© â•"></a>new Vue â€”&gt; createApp ğŸš© â•</h3><blockquote>
<p>vue2ä¸­æ²¡æœ‰app çš„æ¦‚å¿µï¼Œé€šè¿‡<code>Vue</code>çš„ç»Ÿä¸€æ„é€ å‡½æ•°è¿›è¡Œå…¨å±€çš„é…ç½®ï¼Œå•é¡µåº”ç”¨ä¸­æ— æ³•åˆ›å»ºå¤šä¸ªä¸åŒå…¨å±€é…ç½®çš„æ ¹åº”ç”¨ï¼ˆ<a href="https://v3.cn.vuejs.org/guide/migration/global-api.html#%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84%E5%85%A8%E5%B1%80-api-createapp" target="_blank" rel="noopener">ä¼šé€ æˆå…¨å±€é…ç½®æ±¡æŸ“</a>ï¼‰</p>
<p>vue3ä¸­æœ‰äº†appæ¦‚å¿µï¼Œé€šè¿‡<a href="https://github.com/vuejs/core/blob/4951d4352605eb9f4bcbea40ecc68fc6cbc3dce2/packages/runtime-dom/src/index.ts#L53">createApp</a>åˆ›å»ºè¿”å›çš„å®ä¾‹<strong>æš´éœ²å…¨å±€api</strong>ï¼Œè§£å†³äº†vue2ä¸­çš„é—®é¢˜</p>
</blockquote>
<ul>
<li><p>Vue2</p>
<pre><code class="js">import Vue from &quot;vue&quot;;
import App from &#39;./App.vue&#39;

new Vue({
  render: (h) =&gt; h(App)
}).$mount(&quot;#app&quot;);</code></pre>
</li>
<li><p>Vue3</p>
<blockquote>
<p>createApp ç”Ÿæˆä¸€ä¸ªappå®ä¾‹ï¼Œè¯¥å®ä¾‹æ‹¥æœ‰å…¨å±€çš„å¯é…ç½®ä¸Šä¸‹æ–‡</p>
</blockquote>
<pre><code class="js">import { createApp } from &#39;vue&#39;
import App from &#39;./App.vue&#39;

const app = createApp(App).mount(&#39;#app&#39;);</code></pre>
</li>
</ul>
<p>æ‰€ä»¥ç°åœ¨æ‰€æœ‰å…¨å±€ä¼šæ”¹å˜Vueè¡Œä¸ºçš„apiéƒ½æ”¹åˆ°äº†appåº”ç”¨å®ä¾‹ä¸Šäº†</p>
<img src="/Users/leo/Library/Application Support/typora-user-images/image-20220416124853316.png" alt="image-20220416124853316" style="zoom: 67%;">



<h3 id="internal-Apis-ğŸš©"><a href="#internal-Apis-ğŸš©" class="headerlink" title="internal Apis  ğŸš©"></a>internal Apis  ğŸš©</h3><p><a href="https://v3.cn.vuejs.org/guide/migration/global-api-treeshaking.html#_2-x-%E8%AF%AD%E6%B3%95" target="_blank" rel="noopener">æ–‡æ¡£</a></p>
<blockquote>
<p>vue2ä¸­ä¸å°‘global-apiæ˜¯ä½œä¸ºé™æ€å‡½æ•°ç›´æ¥æŒ‚åœ¨æ„é€ å‡½æ•°ä¸Šçš„ï¼Œä¾‹å¦‚<code>Vue.nextTick()</code>ï¼Œå¦‚æœæˆ‘ä»¬ä»æœªåœ¨ä»£ç ä¸­ç”¨è¿‡å®ƒä»¬ï¼Œå°±ä¼šå½¢æˆæ‰€è°“çš„<code>dead code</code>ï¼Œè¿™ç±»global-apié€ æˆçš„<code>dead code</code>æ— æ³•ä½¿ç”¨webpackçš„tree-shakingæ’é™¤æ‰ã€‚</p>
<p>vue3ä¸­åšäº†ç›¸åº”çš„å˜åŒ–ï¼Œå°†å®ƒä»¬æŠ½å–æˆä¸ºç‹¬ç«‹å‡½æ•°ï¼Œè¿™æ ·æ‰“åŒ…å·¥å…·çš„æ‘‡æ ‘ä¼˜åŒ–å¯ä»¥å°†è¿™äº›dead codeæ’é™¤æ‰ã€‚</p>
</blockquote>
<p>Vue2</p>
<pre><code class="js">import Vue from &#39;vue&#39;;
Vue.nextTick(()=&gt;{})</code></pre>
<p>Vue3</p>
<pre><code class="js">import { nextTick } from &#39;vue&#39;
nextTick(() =&gt; {})</code></pre>
<p>å®˜æ–¹æ–‡æ¡£åˆ—å‡ºå—å½±å“çš„api</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="leo/Desktop/weng's" alt="image-20220416125617961" title="code/wengblog/NollieLeo.github.io/source/_posts/vue2-vue3è¿ç§»è®°å½•/image-20220416125617961.png">
                </div>
                <div class="image-caption">code/wengblog/NollieLeo.github.io/source/_posts/vue2-vue3è¿ç§»è®°å½•/image-20220416125617961.png</div>
            </figure>

<h3 id="app-config"><a href="#app-config" class="headerlink" title="app.config"></a><code>app.config</code></h3><h4 id="globalProperties-ğŸš©â•"><a href="#globalProperties-ğŸš©â•" class="headerlink" title="globalProperties  ğŸš©â•"></a><code>globalProperties</code>  ğŸš©â•</h4><blockquote>
<p>æ·»åŠ å¯åœ¨ç¨‹åºå†…çš„ä»»ä½•ç»„ä»¶å®ä¾‹ä¸­è®¿é—®çš„å…¨å±€å±æ€§ã€‚</p>
</blockquote>
<p>Vue2</p>
<pre><code class="js">import Vue from &#39;vue&#39;
Vue.prototype.$http = axios</code></pre>
<p>vue3</p>
<pre><code class="js">// Vue3
const app = Vue.createApp({})
app.config.globalProperties.$http = axios</code></pre>
<h4 id="devtools"><a href="#devtools" class="headerlink" title="devtools"></a><code>devtools</code></h4><blockquote>
<p>é…ç½®æ˜¯å¦å…è®¸ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvuejs%2Fvue-devtools">vue-devtools</a> æ£€æŸ¥ä»£ç ã€‚å¼€å‘ç‰ˆæœ¬é»˜è®¤ä¸º <code>true</code>ï¼Œç”Ÿäº§ç‰ˆæœ¬é»˜è®¤ä¸º <code>false</code>ã€‚ç”Ÿäº§ç‰ˆæœ¬è®¾ä¸º <code>true</code> å¯ä»¥å¯ç”¨æ£€æŸ¥ã€‚</p>
</blockquote>
<pre><code class="js">- Vue.config.devtools = true
+ app.config.devtools = true    
</code></pre>
<h4 id="errorHandler"><a href="#errorHandler" class="headerlink" title="errorHandler"></a><code>errorHandler</code></h4><pre><code class="js">- Vue.config.errorHandler = function (err, vm, info) {
  // handle error
  // `info` æ˜¯ Vue ç‰¹å®šçš„é”™è¯¯ä¿¡æ¯ï¼Œæ¯”å¦‚é”™è¯¯æ‰€åœ¨çš„ç”Ÿå‘½å‘¨æœŸé’©å­
  // åªåœ¨ 2.2.0+ å¯ç”¨
}
+ app.config.errorHandler = (err, vm, info) =&gt; {
  // handle error
  // `info` æ˜¯ Vue ç‰¹å®šçš„é”™è¯¯ä¿¡æ¯ï¼Œæ¯”å¦‚é”™è¯¯æ‰€åœ¨çš„ç”Ÿå‘½å‘¨æœŸé’©å­
  // è¿™é‡Œèƒ½å‘ç°é”™è¯¯
}
</code></pre>
<blockquote>
<p>æŒ‡å®šç»„ä»¶çš„æ¸²æŸ“å’Œè§‚å¯ŸæœŸé—´æœªæ•è·é”™è¯¯çš„å¤„ç†å‡½æ•°ã€‚è¿™ä¸ªå¤„ç†å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå¯è·å–é”™è¯¯ä¿¡æ¯å’Œ Vue å®ä¾‹ã€‚</p>
</blockquote>
<blockquote>
<p>é”™è¯¯è¿½è¸ªæœåŠ¡ <a href="https://link.juejin.cn?target=https%3A%2F%2Fsentry.io%2F">Sentry</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.bugsnag.com%2Fplatforms%2Fbrowsers%2Fvue%2F">Bugsnag</a> éƒ½é€šè¿‡æ­¤é€‰é¡¹æä¾›äº†å®˜æ–¹æ”¯æŒã€‚</p>
</blockquote>
<h4 id="warnHandler"><a href="#warnHandler" class="headerlink" title="warnHandler"></a><code>warnHandler</code></h4><pre><code class="js">- Vue.config.warnHandler = function (msg, vm, trace) {
  // `trace` æ˜¯ç»„ä»¶çš„ç»§æ‰¿å…³ç³»è¿½è¸ª
}
+ app.config.warnHandler = function(msg, vm, trace) {
  // `trace` æ˜¯ç»„ä»¶çš„ç»§æ‰¿å…³ç³»è¿½è¸ª
}
</code></pre>
<blockquote>
<p>ä¸º Vue çš„è¿è¡Œæ—¶è­¦å‘Šèµ‹äºˆä¸€ä¸ªè‡ªå®šä¹‰å¤„ç†å‡½æ•°ã€‚æ³¨æ„è¿™åªä¼šåœ¨å¼€å‘è€…ç¯å¢ƒä¸‹ç”Ÿæ•ˆï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹å®ƒä¼šè¢«å¿½ç•¥ã€‚</p>
</blockquote>
<h4 id="isCustomElement-â•"><a href="#isCustomElement-â•" class="headerlink" title="isCustomElement â•"></a><code>isCustomElement</code> â•</h4><ul>
<li>æ›¿ä»£æ‰Vue2.xçš„ignoredElements</li>
</ul>
<pre><code class="js">- Vue.config.ignoredElements = [
  // ç”¨ä¸€ä¸ª `RegExp` å¿½ç•¥æ‰€æœ‰â€œion-â€å¼€å¤´çš„å…ƒç´ 
  // ä»…åœ¨ 2.5+ æ”¯æŒ
  /^ion-/
]

// ä¸€äº›ç»„ä»¶ä»¥&#39;ion-&#39;å¼€å¤´å°†ä¼šè¢«è§£æä¸ºè‡ªå®šä¹‰ç»„ä»¶
+ app.config.isCustomElement = tag =&gt; tag.startsWith(&#39;ion-&#39;)
</code></pre>
<blockquote>
<p>æŒ‡å®šä¸€ä¸ªæ–¹æ³•æ¥è¯†åˆ«åœ¨Vueä¹‹å¤–å®šä¹‰çš„è‡ªå®šä¹‰ç»„ä»¶(ä¾‹å¦‚ï¼Œä½¿ç”¨<a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.ruanyifeng.com%2Fblog%2F2019%2F08%2Fweb_components.html">Web Component API</a>)ã€‚å¦‚æœç»„ä»¶ç¬¦åˆè¿™ä¸ªæ¡ä»¶ï¼Œå®ƒå°±ä¸éœ€è¦æœ¬åœ°æˆ–å…¨å±€æ³¨å†Œï¼ŒVueä¹Ÿä¸ä¼šæŠ›å‡ºå…³äºUnknown custom elementçš„è­¦å‘Š</p>
</blockquote>
<blockquote>
<p>æ³¨æ„ï¼Œè¿™ä¸ªå‡½æ•°ä¸­ä¸éœ€è¦åŒ¹é…æ‰€æœ‰åŸç”ŸHTMLå’ŒSVGæ ‡è®°â€”Vueè§£æå™¨ä¼šè‡ªåŠ¨æ‰§è¡Œæ­¤æ£€æŸ¥</p>
</blockquote>
<h4 id="optionMergeStrategies"><a href="#optionMergeStrategies" class="headerlink" title="optionMergeStrategies"></a><code>optionMergeStrategies</code></h4><pre><code class="js">const app = Vue.createApp({
  mounted() {
    console.log(this.$options.hello)
  }
})

app.config.optionMergeStrategies.hello = (parent, child, vm) =&gt; {
  return `Hello, ${child}`
}

app.mixin({
  hello: &#39;Vue&#39;
})

// &#39;Hello, Vue
</code></pre>
<blockquote>
<p>å®šä¹‰è‡ªå®šä¹‰é€‰é¡¹çš„åˆå¹¶ç­–ç•¥ã€‚</p>
<p>åˆå¹¶ç­–ç•¥æ¥æ”¶åœ¨<strong>çˆ¶å®ä¾‹</strong>optionså’Œâˆ—âˆ—å­å®ä¾‹âˆ—âˆ—optionså’Œ<strong>å­å®ä¾‹</strong>optionså’Œâˆ—âˆ—å­å®ä¾‹âˆ—âˆ—optionsï¼Œåˆ†åˆ«ä½œä¸ºç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå‚æ•°ã€‚ä¸Šä¸‹æ–‡Vueå®ä¾‹ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’</p>
</blockquote>
<h5 id="ã€è‡ªå®šä¹‰é€‰é¡¹åˆå¹¶ç­–ç•¥ã€‘mixin"><a href="#ã€è‡ªå®šä¹‰é€‰é¡¹åˆå¹¶ç­–ç•¥ã€‘mixin" class="headerlink" title="ã€è‡ªå®šä¹‰é€‰é¡¹åˆå¹¶ç­–ç•¥ã€‘mixin"></a>ã€è‡ªå®šä¹‰é€‰é¡¹åˆå¹¶ç­–ç•¥ã€‘<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvuejs%2Fdocs-next%2Fblob%2Fmaster%2Fsrc%2Fguide%2Fmixins.md%23custom-option-merge-strategies">mixin</a></h5><pre><code class="js">const app = Vue.createApp({
  custom: &#39;hello!&#39;
})

app.config.optionMergeStrategies.custom = (toVal, fromVal) =&gt; {
  console.log(fromVal, toVal)
  // =&gt; &quot;goodbye!&quot;, undefined
  // =&gt; &quot;hello!&quot;, &quot;goodbye!&quot;
  return fromVal || toVal
}

app.mixin({
  custom: &#39;goodbye!&#39;,
  created() {
    console.log(this.$options.custom) // =&gt; &quot;hello!&quot;
  }
})
</code></pre>
<blockquote>
<ul>
<li>optionMergeStrategieså…ˆè·å–åˆ°å­å®ä¾‹çš„$optionsçš„mixinè€Œæ²¡æœ‰çˆ¶å®ä¾‹ã€customç¬¬ä¸€æ¬¡æ”¹å˜ä»undefinedåˆ°goodbyeâ€”&gt;æ‰“å°â€goodbye!â€, undefinedã€‘</li>
<li>çˆ¶å®ä¾‹çš„optionsæ›¿æ¢æ‰å­å®ä¾‹çš„optionsæ›¿æ¢æ‰å­å®ä¾‹çš„optionsæ›¿æ¢æ‰å­å®ä¾‹çš„optionsã€customç¬¬äºŒæ¬¡ä»goodbyeåˆ°hello!â€”&gt;æ‰“å°äº†â€helloâ€, â€œgoodbye!â€ã€‘</li>
<li>æœ€ååœ¨æ‰“å°app.config.optionMergeStrategies.customè¿”å›çš„çˆ¶å®ä¾‹çš„$options</li>
</ul>
</blockquote>
<blockquote>
<p>æ— è®ºå¦‚ä½•this.options.customæœ€åä¼šè¿”å›åˆå¹¶ç­–ç•¥çš„returnçš„å€¼ã€ä½¿ç”¨åœºæ™¯åˆ©ç”¨çˆ¶å­ç»„ä»¶çš„options.customæœ€åä¼šè¿”å›åˆå¹¶ç­–ç•¥çš„returnçš„å€¼ã€ä½¿ç”¨åœºæ™¯åˆ©ç”¨çˆ¶å­ç»„ä»¶çš„options.customæœ€åä¼šè¿”å›åˆå¹¶ç­–ç•¥çš„returnçš„å€¼ã€ä½¿ç”¨åœºæ™¯åˆ©ç”¨çˆ¶å­ç»„ä»¶çš„options,ç„¶åè¿”å›è®¡ç®—ç­‰æ“ä½œå¾—åˆ°æ‰€éœ€è¦çš„å€¼ã€‘optionMergeStrategiesåˆå¹¶$optionså˜åŒ–</p>
</blockquote>
<h4 id="performance"><a href="#performance" class="headerlink" title="performance"></a><code>performance</code></h4><pre><code class="js">- Vue.config.performance=true;
+ app.config.performance=true;
</code></pre>
<blockquote>
<p>è®¾ç½®ä¸º true ä»¥åœ¨æµè§ˆå™¨å¼€å‘å·¥å…·çš„æ€§èƒ½/æ—¶é—´çº¿é¢æ¿ä¸­å¯ç”¨å¯¹ç»„ä»¶åˆå§‹åŒ–ã€ç¼–è¯‘ã€æ¸²æŸ“å’Œæ‰“è¡¥ä¸çš„æ€§èƒ½è¿½è¸ªã€‚åªé€‚ç”¨äºå¼€å‘æ¨¡å¼å’Œæ”¯æŒ performance.mark API çš„æµè§ˆå™¨ä¸Šã€‚</p>
</blockquote>
<h3 id="app-directive"><a href="#app-directive" class="headerlink" title="app.directive"></a><code>app.directive</code></h3><blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvuejs%2Fdocs-next%2Fblob%2Fmaster%2Fsrc%2Fguide%2Fcustom-directive.md">æ•™ç¨‹æ–‡æ¡£</a></p>
</blockquote>
<blockquote>
<p>æ³¨å†Œæˆ–è·å–å…¨å±€æŒ‡ä»¤ã€‚</p>
</blockquote>
<pre><code class="js">import { createApp } from &#39;vue&#39;
const app = createApp({})

// æ³¨å†Œ
app.directive(&#39;my-directive&#39;, {
  // æŒ‡ä»¤çš„ç”Ÿå‘½å‘¨æœŸ
  // åœ¨ç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶è¢«æŒ‚è½½ä¹‹å‰è°ƒç”¨
  beforeMount(el, binding, vnode) {},
  // åœ¨æŒ‚è½½ç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶æ—¶è°ƒç”¨
  mounted(el, binding, vnode) {},
  // åœ¨æ›´æ–°åŒ…å«ç»„ä»¶çš„VNodeä¹‹å‰è°ƒç”¨
  beforeUpdate(el, binding, vnode, prevNode) {},
  // ç»„ä»¶çš„VNodeåŠå…¶å­ç»„ä»¶çš„VNodeæ›´æ–°ä¹‹åè°ƒç”¨
  updated(el, binding, vnode, prevNode) {},
  // åœ¨å¸è½½ç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶ä¹‹å‰è°ƒç”¨
  beforeUnmount(el, binding, vnode) {},
  // åœ¨å¸è½½ç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶æ—¶è°ƒç”¨
  unmounted(el, binding, vnode) {}
})

// æ³¨å†Œ (æŒ‡ä»¤å‡½æ•°)
app.directive(&#39;my-directive&#39;, (el, binding, vnode, prevNode) =&gt; {
  // è¿™é‡Œå°†ä¼šè¢« `mounted` å’Œ `updated` è°ƒç”¨
})

// getterï¼Œè¿”å›å·²æ³¨å†Œçš„æŒ‡ä»¤
const myDirective = app.directive(&#39;my-directive&#39;)
</code></pre>
<ul>
<li><p>el: æŒ‡ä»¤ç»‘å®šåˆ°çš„å…ƒç´ ã€‚è¿™å¯ä»¥ç”¨æ¥ç›´æ¥æ“ä½œDOMã€‚</p>
</li>
<li><p>bindingã€åŒ…å«ä¸‹åˆ—å±æ€§çš„å¯¹è±¡ã€‘</p>
<ul>
<li><p>instanceï¼šä½¿ç”¨æŒ‡ä»¤çš„ç»„ä»¶çš„å®ä¾‹</p>
</li>
<li><p>valueï¼šæŒ‡ä»¤çš„ç»‘å®šå€¼ï¼Œä¾‹å¦‚ï¼š<code>v-my-directive=&quot;1 + 1&quot;</code>ä¸­ï¼Œç»‘å®šå€¼ä¸º <code>2</code></p>
</li>
<li><p>oldValueï¼šæŒ‡ä»¤ç»‘å®šçš„å‰ä¸€ä¸ªå€¼ï¼Œä»…åœ¨ <code>beforeUpdate</code> å’Œ <code>updated</code> é’©å­ä¸­å¯ç”¨ã€‚æ— è®ºå€¼æ˜¯å¦æ”¹å˜éƒ½å¯ç”¨</p>
</li>
<li><p>argï¼šä¼ ç»™æŒ‡ä»¤çš„å‚æ•°ï¼Œå¯é€‰ã€‚ä¾‹å¦‚ <code>v-my-directive:foo</code> ä¸­ï¼Œå‚æ•°ä¸º <code>&quot;foo&quot;</code></p>
</li>
<li><p>modifiersï¼šä¸€ä¸ªåŒ…å«ä¿®é¥°ç¬¦çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼š<code>v-my-directive.foo.bar</code> ä¸­ï¼Œä¿®é¥°ç¬¦å¯¹è±¡ä¸º <code>{ foo: true, bar: true }</code></p>
</li>
<li><p>dirï¼šä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨æ³¨å†ŒæŒ‡ä»¤æ—¶ä½œä¸ºå‚æ•°ä¼ é€’;  ä¸¾ä¸ªä¾‹å­ï¼Œçœ‹ä¸‹é¢æŒ‡ä»¤</p>
<pre><code class="js">app.directive(&#39;focus&#39;, {
  mounted(el) {
    el.focus()
  }
})
</code></pre>
<p>dirå°±æ˜¯ä¸‹é¢çš„å¯¹è±¡</p>
<pre><code class="vue">{
  mounted(el) {
    el.focus()
  }
}
</code></pre>
</li>
</ul>
</li>
<li><p>vnode</p>
<p>ç¼–è¯‘ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹</p>
</li>
<li><p>prevNode</p>
<p>å‰ä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œä»…åœ¨beforeUpdateå’Œupdatedé’©å­ä¸­å¯ç”¨</p>
<blockquote>
<p>tips:é™¤äº† <code>el</code> ä¹‹å¤–ï¼Œå…¶å®ƒå‚æ•°éƒ½åº”è¯¥æ˜¯åªè¯»çš„ï¼Œåˆ‡å‹¿è¿›è¡Œä¿®æ”¹ã€‚å¦‚æœéœ€è¦åœ¨é’©å­ä¹‹é—´å…±äº«æ•°æ®ï¼Œå»ºè®®é€šè¿‡å…ƒç´ çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FHTMLElement%2Fdataset"><code>dataset</code></a> æ¥è¿›è¡Œ</p>
</blockquote>
</li>
</ul>
<h3 id="app-unmount-ğŸš©â•"><a href="#app-unmount-ğŸš©â•" class="headerlink" title="app.unmount ğŸš©â•"></a><code>app.unmount</code> ğŸš©â•</h3><blockquote>
<p>åœ¨æ‰€æä¾›çš„DOMå…ƒç´ ä¸Šå¸è½½åº”ç”¨ç¨‹åºå®ä¾‹çš„æ ¹ç»„ä»¶</p>
</blockquote>
<pre><code class="js">import { createApp } from &#39;vue&#39;

const app = createApp({})
// åšä¸€äº›å¿…è¦çš„å‡†å¤‡
app.mount(&#39;#my-app&#39;)

// åº”ç”¨ç¨‹åºå°†åœ¨æŒ‚è½½å5ç§’è¢«å¸è½½
setTimeout(() =&gt; app.unmount(&#39;#my-app&#39;), 5000)</code></pre>
<h3 id="app-component"><a href="#app-component" class="headerlink" title="app.component"></a><code>app.component</code></h3><ul>
<li><p>Vue2.xã€æ³¨å†Œæˆ–è·å–å…¨å±€ç»„ä»¶ã€‚æ³¨å†Œè¿˜ä¼šè‡ªåŠ¨ä½¿ç”¨ç»™å®šçš„ <code>id</code> è®¾ç½®ç»„ä»¶çš„åç§°ã€‘</p>
<pre><code class="js">// æ³¨å†Œç»„ä»¶ï¼Œä¼ å…¥ä¸€ä¸ªé€‰é¡¹å¯¹è±¡ (è‡ªåŠ¨è°ƒç”¨ Vue.extend) 

Vue.component(&#39;my-component&#39;, { /* ... */ }) 

// è·å–æ³¨å†Œçš„ç»„ä»¶ (å§‹ç»ˆè¿”å›æ„é€ å™¨) 
var MyComponent = Vue.component(&#39;my-component&#39;)
</code></pre>
</li>
<li><p>Vue3ã€æ³¨å†Œæˆ–è·å–å…¨å±€ç»„ä»¶. æ³¨å†Œè¿˜ä¼šè‡ªåŠ¨ä½¿ç”¨ç»™å®šçš„ nameç»„ä»¶ è®¾ç½®ç»„ä»¶çš„åç§°ã€‘<a href="https://link.juejin.cn?target=https%3A%2F%2Fcodepen.io%2Fteam%2FVue%2Fpen%2FrNVqYvM">å…¨å±€ç»„ä»¶</a></p>
<blockquote>
<p>åŸºæœ¬vue2å†™æ³•ä¸€è‡´</p>
</blockquote>
<pre><code class="js">import { createApp } from &#39;vue&#39;

const app = createApp({})

// æ³¨å†Œç»„ä»¶ï¼Œä¼ å…¥ä¸€ä¸ªé€‰é¡¹å¯¹è±¡
app.component(&#39;my-component&#39;, {
  /* ... */
})

// è·å–æ³¨å†Œçš„ç»„ä»¶ (å§‹ç»ˆè¿”å›æ„é€ å™¨) 
const MyComponent = app.component(&#39;my-component&#39;, {})</code></pre>
</li>
</ul>
<h2 id="watch"><a href="#watch" class="headerlink" title="watch"></a>watch</h2><blockquote>
<p>ä»¥<code>.</code>åˆ†å‰²çš„è¡¨è¾¾å¼ä¸å†è¢«watchæ”¯æŒï¼Œå¯ä»¥ä½¿ç”¨è®¡ç®—å‡½æ•°ä½œä¸º<em>w*</em>a<strong>t</strong>c*<em>h</em>æ”¯æŒï¼Œå¯ä»¥ä½¿ç”¨è®¡ç®—å‡½æ•°ä½œä¸ºwatchå‚æ•°å®ç°ã€‚</p>
</blockquote>
<p><strong>Vue2</strong></p>
<pre><code class="js">watch: {
    &quot;data.id&quot;(val) {  
    },
},</code></pre>
<p><strong>Vue3</strong></p>
<pre><code class="js">const data = reactive({
  id:121
});
watch(data.id,()=&gt;{})</code></pre>
<h2 id="emits-â•"><a href="#emits-â•" class="headerlink" title="emits â•"></a>emits â•</h2><blockquote>
<p><a href="https://v3.cn.vuejs.org/guide/migration/emits-option.html#emits-%E9%80%89%E9%A1%B9" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p>
</blockquote>
<ul>
<li>emits å¯ä»¥æ˜¯æ•°ç»„æˆ–å¯¹è±¡</li>
<li>è§¦å‘è‡ªå®šä¹‰äº‹ä»¶</li>
<li>å¦‚æœemitsæ˜¯å¯¹è±¡ï¼Œåˆ™å…è®¸æˆ‘ä»¬é…ç½®å’Œäº‹ä»¶éªŒè¯ã€‚éªŒè¯å‡½æ•°åº”è¿”å›å¸ƒå°”å€¼ï¼Œä»¥è¡¨ç¤ºäº‹ä»¶å‚æ•°æ˜¯å¦æœ‰æ•ˆã€‚</li>
</ul>
<h2 id="ä¾èµ–æ³¨å…¥provide-inject"><a href="#ä¾èµ–æ³¨å…¥provide-inject" class="headerlink" title="ä¾èµ–æ³¨å…¥provide/inject"></a>ä¾èµ–æ³¨å…¥provide/inject</h2><blockquote>
<p>ä¸vue2ä¸­ä½¿ç”¨æ–¹æ³•æ²¡æœ‰ä»€ä¹ˆå¾ˆå¤§çš„å·®å¼‚ï¼Œä½†æ˜¯äº®ç‚¹æ˜¯å¯ä»¥æä¾›ç›¸åº”å¼çš„æ•°æ®</p>
</blockquote>
<h3 id="åŸºç¡€ä½¿ç”¨æ–¹æ³•"><a href="#åŸºç¡€ä½¿ç”¨æ–¹æ³•" class="headerlink" title="åŸºç¡€ä½¿ç”¨æ–¹æ³•"></a>åŸºç¡€ä½¿ç”¨æ–¹æ³•</h3><p>çœ‹æ–‡æ¡£</p>
<h3 id="å“åº”å¼æ–¹æ³•-ğŸš©â•"><a href="#å“åº”å¼æ–¹æ³•-ğŸš©â•" class="headerlink" title="å“åº”å¼æ–¹æ³•  ğŸš©â•"></a>å“åº”å¼æ–¹æ³•  ğŸš©â•</h3><p>ä¾‹å¦‚ï¼š</p>
<pre><code class="js">import { ref, reactive } from &#39;vue&#39;

// æä¾›è€…
setup() {
  const book = reactive({
    title: &#39;Vue 3 Guide&#39;,
    author: &#39;Vue Team&#39;
  })
  const year = ref(&#39;2020&#39;)

 /*æä¾›reactiveå“åº”å¼*/
  provide(&#39;book&#39;, book)
 /*æä¾›refå“åº”å¼*/
  provide(&#39;year&#39;, year)
}</code></pre>
<h4 id="å¼Šç«¯"><a href="#å¼Šç«¯" class="headerlink" title="å¼Šç«¯"></a>å¼Šç«¯</h4><p>æä¾›ç›¸åº”å¼çš„æ–¹æ³•ä¹‹åï¼Œå­ç»„å»ºå°±å¯ä»¥å°è¯•å¯¹è¿™ä¸ªå¼•ç”¨å€¼è¿›è¡Œä¿®æ”¹ï¼Œä»è€Œå¯¼è‡´å•å‘æ•°æ®æµé€šçš„ç´Šä¹±</p>
<p>ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼ŒåŸºäºprovideè¿›è¡Œå°è£…</p>
<pre><code class="js">/*
 * @Author: ç¿æºæ•
 * @Date: 2022-04-10 16:11:32
 * @LastEditors: ç¿æºæ•
 * @LastEditTime: 2022-04-16 15:21:11
 * @FilePath: /vue3-vite-test/src/hooks/useProvide.ts
 * @Description: provide ï¼ˆobserverable provideï¼‰
 */
import { provide, readonly, reactive, ref, isReactive } from &quot;vue&quot;;
import forEach from &quot;lodash/forEach&quot;;

const useProvide = (shouldReactive: Boolean = true) =&gt; {
  const handleProvide = (providers: Record&lt;string, any&gt;): void =&gt; {
    forEach(providers, (value, key) =&gt; {
      let provideValue;
      const isFunction = typeof value === &quot;function&quot;;
      if (!isFunction) {
        provideValue =
          shouldReactive &amp;&amp; !isReactive(value) ? ref(value) : value;
      }
      provide(key, isFunction ? provideValue : readonly(provideValue));
    });
  };

  return handleProvide;
};

export default useProvide;</code></pre>
<h2 id="defineAsyncComponent-å¼‚æ­¥ç»„ä»¶"><a href="#defineAsyncComponent-å¼‚æ­¥ç»„ä»¶" class="headerlink" title="defineAsyncComponent(å¼‚æ­¥ç»„ä»¶)"></a>defineAsyncComponent(å¼‚æ­¥ç»„ä»¶)</h2><h1 id="ç”Ÿå‘½å‘¨æœŸå‡½æ•°"><a href="#ç”Ÿå‘½å‘¨æœŸå‡½æ•°" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸå‡½æ•°"></a>ç”Ÿå‘½å‘¨æœŸå‡½æ•°</h1><h2 id="ä¸-2-x-ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸç›¸å¯¹åº”çš„ç»„åˆå¼-API-ğŸš©â•"><a href="#ä¸-2-x-ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸç›¸å¯¹åº”çš„ç»„åˆå¼-API-ğŸš©â•" class="headerlink" title="ä¸ 2.x ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸç›¸å¯¹åº”çš„ç»„åˆå¼ API ğŸš©â•"></a><strong>ä¸ 2.x ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸç›¸å¯¹åº”çš„ç»„åˆå¼ API</strong> ğŸš©â•</h2><ul>
<li><del><code>beforeCreate</code></del> -&gt; ä½¿ç”¨ <code>setup()</code></li>
<li><del><code>created</code></del> -&gt; ä½¿ç”¨ <code>setup()</code></li>
<li><code>beforeMount</code> -&gt; <code>onBeforeMount</code></li>
<li><code>mounted</code> -&gt; <code>onMounted</code></li>
<li><code>beforeUpdate</code> -&gt; <code>onBeforeUpdate</code></li>
<li><code>updated</code> -&gt; <code>onUpdated</code></li>
<li><code>beforeDestroy</code> -&gt; <code>onBeforeUnmount</code></li>
<li><code>destroyed</code> -&gt; <code>onUnmounted</code></li>
<li><code>errorCaptured</code> -&gt; <code>onErrorCaptured</code></li>
</ul>
<h2 id="éç»„åˆå¼api"><a href="#éç»„åˆå¼api" class="headerlink" title="éç»„åˆå¼api"></a>éç»„åˆå¼api</h2><p>åªæ˜¯æ”¹äº†åå­—</p>
<h1 id="å†…ç½®æŒ‡ä»¤å˜åŒ–"><a href="#å†…ç½®æŒ‡ä»¤å˜åŒ–" class="headerlink" title="å†…ç½®æŒ‡ä»¤å˜åŒ–"></a>å†…ç½®æŒ‡ä»¤å˜åŒ–</h1><h2 id="v-model-ğŸš©"><a href="#v-model-ğŸš©" class="headerlink" title="v-model ğŸš©"></a><code>v-model</code> ğŸš©</h2><blockquote>
<p><a href="https://v3.cn.vuejs.org/guide/component-basics.html#%E5%9C%A8%E7%BB%84%E4%BB%B6%E4%B8%8A%E4%BD%BF%E7%94%A8-v-model" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p>
</blockquote>
<h3 id="ç»„ä»¶ä½¿ç”¨"><a href="#ç»„ä»¶ä½¿ç”¨" class="headerlink" title="ç»„ä»¶ä½¿ç”¨"></a>ç»„ä»¶ä½¿ç”¨</h3><p><strong>vue2 â€” v-model</strong></p>
<pre><code class="jsx">&lt;ChildComponent v-model=&quot;pageTitle&quot; /&gt;

&lt;!-- ç®€å†™: --&gt;
&lt;ChildComponent :value=&quot;pageTitle&quot; @input=&quot;pageTitle = $event&quot; /&gt;</code></pre>
<p>å¦‚æœè¦å°†å±æ€§æˆ–äº‹ä»¶åç§°æ›´æ”¹ä¸ºå…¶ä»–åç§°ï¼Œåˆ™éœ€è¦åœ¨ <code>ChildComponent</code> ç»„ä»¶ä¸­æ·»åŠ  <code>model</code> é€‰é¡¹ï¼š</p>
<pre><code class="jsx">&lt;!-- ParentComponent.vue --&gt;
&lt;ChildComponent v-model=&quot;pageTitle&quot; /&gt;</code></pre>
<pre><code class="js">// ChildComponent.vue
export default {
  model: {
    prop: &#39;title&#39;,
    event: &#39;change&#39;
  },
  props: {
    // è¿™å°†å…è®¸ `value` å±æ€§ç”¨äºå…¶ä»–ç”¨é€”
    value: String,
    // ä½¿ç”¨ `title` ä»£æ›¿ `value` ä½œä¸º model çš„ prop
    title: {
      type: String,
      default: &#39;Default title&#39;
    }
  }
}</code></pre>
<p>æ‰€ä»¥ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ <code>v-model</code> çš„ç®€å†™å¦‚ä¸‹ï¼š</p>
<pre><code class="jsx">&lt;ChildComponent :title=&quot;pageTitle&quot; @change=&quot;pageTitle = $event&quot; /&gt;</code></pre>
<p><strong>Vue2 â€” v-bind.sync</strong></p>
<p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å¯¹æŸä¸€ä¸ª prop è¿›è¡Œâ€œåŒå‘ç»‘å®šâ€(é™¤äº†å‰é¢ç”¨ <code>v-model</code> ç»‘å®š prop çš„æƒ…å†µ)ã€‚å»ºè®®ä½¿ç”¨ <code>update:myPropName</code> æŠ›å‡ºäº‹ä»¶ã€‚ä¾‹å¦‚ï¼Œå¯¹äºåœ¨ä¸Šä¸€ä¸ªç¤ºä¾‹ä¸­å¸¦æœ‰ <code>title</code> prop çš„ <code>ChildComponent</code>ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼å°†åˆ†é…æ–° value çš„æ„å›¾ä¼ è¾¾ç»™çˆ¶çº§ï¼š</p>
<pre><code class="js">this.$emit(&#39;update:title&#39;, newValue)</code></pre>
<p>å¦‚æœéœ€è¦çš„è¯ï¼Œçˆ¶çº§å¯ä»¥ç›‘å¬è¯¥äº‹ä»¶å¹¶æ›´æ–°æœ¬åœ° data propertyã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="jsx">&lt;ChildComponent :title=&quot;pageTitle&quot; @update:title=&quot;pageTitle = $event&quot; /&gt;</code></pre>
<p>ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>.sync</code> ä¿®é¥°ç¬¦æ¥ç¼©å†™ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="jsx">&lt;ChildComponent :title.sync=&quot;pageTitle&quot; /&gt;</code></pre>
<p><strong>Vue3 â€” v-model</strong></p>
<pre><code class="jsx">&lt;ChildComponent v-model=&quot;pageTitle&quot; /&gt;

&lt;!-- ç®€å†™: --&gt;

&lt;ChildComponent
  :modelValue=&quot;pageTitle&quot;
  @update:modelValue=&quot;pageTitle = $event&quot;
/&gt;

&lt;ChildComponent v-model:title=&quot;pageTitle&quot; /&gt;

&lt;!-- ç®€å†™: --&gt;

&lt;ChildComponent
  :title=&quot;pageTitle&quot;
  @update:title=&quot;pageTitle = $event&quot;
/&gt;</code></pre>
<h2 id="v-is-ğŸš©â•"><a href="#v-is-ğŸš©â•" class="headerlink" title="v-is ğŸš©â•"></a><code>v-is</code> ğŸš©â•</h2><blockquote>
<p>V-is ä»…é™äºindomçš„æ¨¡ç‰ˆ</p>
</blockquote>
<blockquote>
<p>Vue3ä¸­åªèƒ½ä½¿ç”¨isåœ¨å†…ç½®çš„componentç»„ä»¶ä¸Šé¢</p>
</blockquote>
<p><strong>vue2</strong></p>
<pre><code class="html">&lt;table&gt;
  &lt;tr :is=&quot;&#39;my-component&#39;&quot;&gt;&lt;/tr&gt;
&lt;/table&gt;</code></pre>
<p><strong>vue3</strong></p>
<blockquote>
<p>:isä¸å†é€‚ç”¨äºindomçš„æ¨¡ç‰ˆ</p>
</blockquote>
<pre><code class="html">&lt;table&gt;
  &lt;tr v-is=&quot;&#39;my-component&#39;&quot;&gt;&lt;/tr&gt;
&lt;/table&gt;</code></pre>
<h2 id="v-slot-ğŸš©â•"><a href="#v-slot-ğŸš©â•" class="headerlink" title="v-slot ğŸš©â•"></a><code>v-slot</code> ğŸš©â•</h2><blockquote>
<p>æ’æ§½åœ¨vue3ä¸­ç»Ÿä¸€äº†vue2çš„slotå’Œscope-slot</p>
</blockquote>
<p><strong>Vue2</strong></p>
<pre><code class="jsx">&lt;!--  å­ç»„ä»¶ä¸­ï¼š--&gt;
&lt;slot name=&quot;title&quot;&gt;&lt;/slot&gt;

&lt;!--  çˆ¶ç»„ä»¶ä¸­ï¼š--&gt;
&lt;template slot=&quot;title&quot;&gt;
    &lt;h1&gt;æ­Œæ›²ï¼šæˆéƒ½&lt;/h1&gt;
&lt;template&gt;</code></pre>
<p>å¦‚æœæˆ‘ä»¬è¦<strong>åœ¨ slot ä¸Šé¢ç»‘å®šæ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ä½œç”¨åŸŸæ’æ§½</strong>ï¼Œå®ç°å¦‚ä¸‹ï¼š</p>
<pre><code class="js">// å­ç»„ä»¶
&lt;slot name=&quot;content&quot; :data=&quot;data&quot;&gt;&lt;/slot&gt;
export default {
    data(){
        return{
            data:[&quot;èµ°è¿‡æ¥äººæ¥äººå¾€&quot;,&quot;ä¸å–œæ¬¢ä¹Ÿå¾—æ¬£èµ&quot;,&quot;é™ªä¼´æ˜¯æœ€é•¿æƒ…çš„å‘Šç™½&quot;]
        }
    }
}

&lt;!-- çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨ --&gt;
&lt;template slot=&quot;content&quot; slot-scope=&quot;scoped&quot;&gt;
    &lt;div v-for=&quot;item in scoped.data&quot;&gt;{{item}}&lt;/div&gt;
&lt;template&gt;</code></pre>
<p><strong>Vue3</strong></p>
<p>åœ¨ Vue2.x ä¸­å…·åæ’æ§½å’Œä½œç”¨åŸŸæ’æ§½åˆ†åˆ«ä½¿ç”¨<code>slot</code>å’Œ<code>slot-scope</code>æ¥å®ç°ï¼Œ åœ¨ Vue3.0 ä¸­å°†<code>slot</code>å’Œ<code>slot-scope</code>è¿›è¡Œäº†åˆå¹¶åŒæ„ä½¿ç”¨ã€‚ Vue3.0 ä¸­<code>v-slot</code>ï¼š</p>
<pre><code class="vue">&lt;!-- çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨ --&gt;
 &lt;template v-slot:content=&quot;scoped&quot;&gt;
   &lt;div v-for=&quot;item in scoped.data&quot;&gt;{{item}}&lt;/div&gt;
&lt;/template&gt;

&lt;!-- ä¹Ÿå¯ä»¥ç®€å†™æˆï¼š --&gt;
&lt;template #content=&quot;{data}&quot;&gt;
    &lt;div v-for=&quot;item in data&quot;&gt;{{item}}&lt;/div&gt;
&lt;/template&gt;</code></pre>
<h1 id="è‡ªå®šä¹‰æŒ‡ä»¤å˜åŒ–-ğŸš©â•"><a href="#è‡ªå®šä¹‰æŒ‡ä»¤å˜åŒ–-ğŸš©â•" class="headerlink" title="è‡ªå®šä¹‰æŒ‡ä»¤å˜åŒ– ğŸš©â•"></a>è‡ªå®šä¹‰æŒ‡ä»¤å˜åŒ– ğŸš©â•</h1><p>vue3ä¸­æŒ‡ä»¤apiå’Œç»„ä»¶ä¿æŒä¸€è‡´ï¼Œå…·ä½“è¡¨ç°åœ¨ï¼š</p>
<ul>
<li>bind â†’ <strong>beforeMount</strong></li>
<li>inserted â†’ <strong>mounted</strong></li>
<li><strong>beforeUpdate</strong>: new! å…ƒç´ è‡ªèº«æ›´æ–°å‰è°ƒç”¨, å’Œç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­å¾ˆåƒ</li>
<li>update â†’ removed! å’ŒupdatedåŸºæœ¬ç›¸åŒï¼Œå› æ­¤è¢«ç§»é™¤ä¹‹ï¼Œä½¿ç”¨updatedä»£æ›¿ã€‚</li>
<li>componentUpdated â†’ <strong>updated</strong></li>
<li><strong>beforeUnmount</strong> new! å’Œç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­ç›¸ä¼¼, å…ƒç´ å°†è¦è¢«ç§»é™¤ä¹‹å‰è°ƒç”¨ã€‚</li>
<li>unbind  â†’  <strong>unmounted</strong></li>
</ul>
<h1 id="å†…ç½®ç»„ä»¶"><a href="#å†…ç½®ç»„ä»¶" class="headerlink" title="å†…ç½®ç»„ä»¶"></a>å†…ç½®ç»„ä»¶</h1><h2 id="teleport-ğŸš©â•"><a href="#teleport-ğŸš©â•" class="headerlink" title="teleport ğŸš©â•"></a><code>teleport</code> ğŸš©â•</h2><p><a href="https://github.com/vuejs/core/blob/main/packages/runtime-core/src/components/Teleport.ts">æºç </a></p>
<p><strong>Props</strong></p>
<ul>
<li><p><code>to</code> - <code>string</code> å¿…å¡«å±æ€§ï¼Œå¿…é¡»æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„queryé€‰æ‹©å™¨ï¼Œæˆ–è€…æ˜¯å…ƒç´ (å¦‚æœåœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ä½¿ç”¨ï¼‰ã€‚ä¸­çš„å†…å®¹å°†ä¼šè¢«æ”¾ç½®åˆ°æŒ‡å®šçš„ç›®æ ‡å…ƒç´ ä¸­</p>
<pre><code class="js">&lt;!-- æ­£ç¡®çš„ --&gt;
&lt;teleport to=&quot;#some-id&quot; /&gt;
&lt;teleport to=&quot;.some-class&quot; /&gt;
 /*å…ƒç´ */
&lt;teleport to=&quot;[data-teleport]&quot; /&gt;

&lt;!-- é”™è¯¯çš„ --&gt;
&lt;teleport to=&quot;h1&quot; /&gt;
&lt;teleport to=&quot;some-string&quot; /&gt;
</code></pre>
</li>
<li><p><code>disabled</code>  - <code>boolean</code> è¿™æ˜¯ä¸€ä¸ªå¯é€‰é¡¹ ï¼Œåšä¸€ä¸ªæ˜¯å¯ä»¥ç”¨æ¥ç¦ç”¨çš„åŠŸèƒ½ï¼Œè¿™æ„å‘³ç€å®ƒçš„æ’æ§½å†…å®¹ä¸ä¼šç§»åŠ¨åˆ°ä»»ä½•åœ°æ–¹ï¼Œè€Œæ˜¯æŒ‰æ²¡æœ‰<code>teleport</code>ç»„ä»¶ä¸€èˆ¬æ¥å‘ˆç°ã€é»˜è®¤ä¸ºfalseã€‘</p>
<pre><code class="js">&lt;teleport to=&quot;#popup&quot; :disabled=&quot;displayVideoInline&quot;&gt;
  &lt;h1&gt;999999&lt;/h1&gt;
&lt;/teleport&gt;
</code></pre>
<p>æ³¨æ„ï¼Œè¿™å°†ç§»åŠ¨å®é™…çš„DOMèŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯é”€æ¯å’Œé‡æ–°åˆ›å»ºï¼Œå¹¶ä¸”è¿˜å°†ä¿æŒä»»ä½•ç»„ä»¶å®ä¾‹æ˜¯æ´»åŠ¨çš„ã€‚æ‰€æœ‰æœ‰çŠ¶æ€HTMLå…ƒç´ (æ¯”å¦‚ä¸€ä¸ªæ­£åœ¨æ’­æ”¾çš„è§†é¢‘)å°†ä¿æŒå®ƒä»¬çš„çŠ¶æ€ã€‚ã€æ§åˆ¶displayVideoInlineå¹¶ä¸æ˜¯é”€æ¯é‡å»ºï¼Œå®ƒä¿æŒå®ä¾‹æ˜¯å­˜åœ¨çš„ï¼Œä¸ä¼šè¢«æ³¨é”€ã€‘</p>
</li>
</ul>
<h2 id="Suspense-ğŸš©â•"><a href="#Suspense-ğŸš©â•" class="headerlink" title="Suspense ğŸš©â•"></a><code>Suspense</code> ğŸš©â•</h2><blockquote>
<p><a href="https://v3.cn.vuejs.org/guide/migration/suspense.html#%E4%BB%8B%E7%BB%8D" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p>
</blockquote>
<blockquote>
<p>å®˜æ–¹æ–‡æ¡£ç›®å‰è¿˜æ˜¯æ ‡æ³¨ä¸ºè¯•éªŒæ€§</p>
</blockquote>
<p>è¯¥ <code>&lt;suspense&gt;</code> ç»„ä»¶æä¾›äº†å¦ä¸€ä¸ªæ–¹æ¡ˆï¼Œå…è®¸å°†ç­‰å¾…è¿‡ç¨‹æå‡åˆ°ç»„ä»¶æ ‘ä¸­å¤„ç†ï¼Œè€Œä¸æ˜¯åœ¨å•ä¸ªç»„ä»¶ä¸­ã€‚</p>
<p>è‡ªå¸¦ä¸¤ä¸ª <code>slot</code> åˆ†åˆ«ä¸º <code>defaultã€fallback</code>ã€‚é¡¾åæ€ä¹‰ï¼Œå½“è¦åŠ è½½çš„ç»„ä»¶ä¸æ»¡è¶³çŠ¶æ€æ—¶,<code>Suspense</code> å°†å›é€€åˆ° <code>fallback</code>çŠ¶æ€ä¸€ç›´åˆ°åŠ è½½çš„ç»„ä»¶æ»¡è¶³æ¡ä»¶ï¼Œæ‰ä¼šè¿›è¡Œæ¸²æŸ“ã€‚</p>
<p>Suspense.vue</p>
<pre><code class="vue">&lt;template&gt;
  &lt;button @click=&quot;loadAsyncComponent&quot;&gt;ç‚¹å‡»åŠ è½½å¼‚æ­¥ç»„ä»¶&lt;/button&gt;
  &lt;Suspense v-if=&quot;loadAsync&quot;&gt;
    &lt;template #default&gt;
      &lt;!-- åŠ è½½å¯¹åº”çš„ç»„ä»¶ --&gt;
      &lt;MAsynComp&gt;&lt;/MAsynComp&gt;
    &lt;/template&gt;
    &lt;template #fallback&gt;
      &lt;div class=&quot;loading&quot;&gt;&lt;/div&gt;
    &lt;/template&gt;
  &lt;/Suspense&gt;
&lt;/template&gt;

&lt;script&gt;
import { ref, defineAsyncComponent } from &#39;vue&#39;

export default {
  components: {
    MAsynComp: defineAsyncComponent(() =&gt; import(&#39;./AsynComp.vue&#39;)),
  },
  setup() {
    const loadAsync = ref(false)
    const loadAsyncComponent = () =&gt; {
      loadAsync.value = true
    }
    return {
      loadAsync,
      loadAsyncComponent,
    }
  },
}
&lt;/script&gt;

&lt;style lang=&quot;less&quot; scoped&gt;

button {
  padding: 12px 12px;
  background-color: #1890ff;
  outline: none;
  border: none;
  border-radius: 4px;
  color: #fff;
  cursor: pointer;
}
.loading {
  position: absolute;
  width: 36px;
  height: 36px;
  top: 50%;
  left: 50%;
  margin: -18px 0 0 -18px;
  background-image: url(&#39;../assets/loading.png&#39;);
  background-size: 100%;
  animation: rotate 1.4s linear infinite;
}
@keyframes rotate {
  from {
    transform: rotate(0);
  }
  to {
    transform: rotate(360deg);
  }
}
&lt;/style&gt;

</code></pre>
<p>AsynComp.vue</p>
<pre><code class="vue">&lt;template&gt;
  &lt;h1&gt;this is async component&lt;/h1&gt;
&lt;/template&gt;

&lt;script&gt;
import { setup } from &#39;vue&#39;
export default {
  name: &#39;AsyncComponent&#39;,
  async setup() {
    const sleep = (time) =&gt; {
      return new Promise((reslove, reject) =&gt; {
        setTimeout(() =&gt; {
          reslove()
        }, time)
      })
    }
    await sleep(3000) //æ¨¡æ‹Ÿæ•°æ®è¯·æ±‚
  },
}
&lt;/script&gt;

</code></pre>
<h2 id="Fragments-ğŸš©â•"><a href="#Fragments-ğŸš©â•" class="headerlink" title="Fragments ğŸš©â•"></a><code>Fragments</code> ğŸš©â•</h2><p>Vue3.0ç»„ä»¶ä¸­å¯ä»¥å…è®¸æœ‰å¤šä¸ªæ ¹ç»„ä»¶ï¼Œé¿å…äº†å¤šä¸ªæ²¡å¿…è¦çš„divæ¸²æŸ“</p>
<pre><code class="html">&lt;template&gt;
  &lt;div&gt;å¤´éƒ¨&lt;/div&gt;
  &lt;div&gt;å†…å®¹&lt;/div&gt;
&lt;/template&gt;
</code></pre>
<p>è¿™æ ·åšçš„å¥½å¤„ï¼š</p>
<ul>
<li>å°‘äº†å¾ˆå¤šæ²¡æœ‰æ„ä¹‰çš„div</li>
<li>å¯ä»¥å®ç°å¹³çº§é€’å½’ï¼Œå¯¹å®ç°treeç»„ä»¶æœ‰å¾ˆå¤§å¸®åŠ©</li>
</ul>
<h1 id="ç›¸åº”å¼ç³»ç»Ÿ-ğŸš©ğŸš©ğŸš©"><a href="#ç›¸åº”å¼ç³»ç»Ÿ-ğŸš©ğŸš©ğŸš©" class="headerlink" title="ç›¸åº”å¼ç³»ç»Ÿ ğŸš©ğŸš©ğŸš©"></a>ç›¸åº”å¼ç³»ç»Ÿ ğŸš©ğŸš©ğŸš©</h1><h2 id="å“åº”å¼ç³»ç»Ÿ-API"><a href="#å“åº”å¼ç³»ç»Ÿ-API" class="headerlink" title="å“åº”å¼ç³»ç»Ÿ API"></a>å“åº”å¼ç³»ç»Ÿ API</h2><h3 id="reactive"><a href="#reactive" class="headerlink" title="reactive"></a><code>reactive</code></h3><p>desc: æ¥æ”¶ä¸€ä¸ªæ™®é€šå¯¹è±¡ç„¶åè¿”å›è¯¥æ™®é€šå¯¹è±¡çš„å“åº”å¼ä»£ç†ã€ç­‰åŒäº 2.x çš„ <code>Vue.observable()</code>ã€‘</p>
<ul>
<li><p>ssss</p>
<p>tips:<code>Proxy</code>å¯¹è±¡æ˜¯ç›®æ ‡å¯¹è±¡çš„ä¸€ä¸ªä»£ç†å™¨ï¼Œä»»ä½•å¯¹ç›®æ ‡å¯¹è±¡çš„æ“ä½œï¼ˆå®ä¾‹åŒ–ï¼Œæ·»åŠ /åˆ é™¤/ä¿®æ”¹å±æ€§ç­‰ç­‰ï¼‰ï¼Œéƒ½å¿…é¡»é€šè¿‡è¯¥ä»£ç†å™¨ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥æŠŠæ¥è‡ªå¤–ç•Œçš„æ‰€æœ‰æ“ä½œè¿›è¡Œæ‹¦æˆªå’Œè¿‡æ»¤æˆ–è€…ä¿®æ”¹ç­‰æ“ä½œ</p>
</li>
</ul>
<blockquote>
<p>å“åº”å¼è½¬æ¢æ˜¯â€œæ·±å±‚çš„â€ï¼šä¼šå½±å“å¯¹è±¡å†…éƒ¨æ‰€æœ‰åµŒå¥—çš„å±æ€§ã€‚åŸºäº ES2015 çš„ Proxy å®ç°ï¼Œè¿”å›çš„ä»£ç†å¯¹è±¡<strong>ä¸ç­‰äº</strong>åŸå§‹å¯¹è±¡ã€‚å»ºè®®ä»…ä½¿ç”¨ä»£ç†å¯¹è±¡è€Œé¿å…ä¾èµ–åŸå§‹å¯¹è±¡</p>
</blockquote>
<blockquote>
<p><code>reactive</code> ç±»çš„ api ä¸»è¦æä¾›äº†å°†å¤æ‚ç±»å‹çš„æ•°æ®å¤„ç†æˆå“åº”å¼æ•°æ®çš„èƒ½åŠ›ï¼Œå…¶å®è¿™ä¸ªå¤æ‚ç±»å‹æ˜¯è¦åœ¨<code>object array map set weakmap weakset</code> è¿™äº”ç§ä¹‹ä¸­</p>
</blockquote>
<blockquote>
<p>å› ä¸ºæ˜¯ç»„åˆå‡½æ•°ã€å¯¹è±¡ã€‘ï¼Œæ‰€ä»¥å¿…é¡»å§‹ç»ˆä¿æŒå¯¹è¿™ä¸ªæ‰€è¿”å›å¯¹è±¡çš„å¼•ç”¨ä»¥ä¿æŒå“åº”æ€§ã€ä¸èƒ½è§£æ„è¯¥å¯¹è±¡æˆ–è€…å±•å¼€ã€‘ä¾‹å¦‚ <code>const { x, y } = useMousePosition()</code>æˆ–è€…<code>return { ...useMousePosition() }</code></p>
</blockquote>
<pre><code class="js">function useMousePosition() {
    const pos = reactive({
        x: 0,
        y: 0,
      })

    return pos
}



</code></pre>
<p><a href="https://v3.cn.vuejs.org/guide/composition-api-introduction.html#torefs" target="_blank" rel="noopener"><code>toRefs</code></a> API ç”¨æ¥æä¾›è§£å†³æ­¤çº¦æŸçš„åŠæ³•â€”â€”å®ƒå°†å“åº”å¼å¯¹è±¡çš„æ¯ä¸ª property éƒ½è½¬æˆäº†ç›¸åº”çš„ refã€æŠŠå¯¹è±¡è½¬æˆäº†refã€‘ã€‚</p>
<blockquote>
<pre><code class="js"> function useMousePosition() {
    const pos = reactive({
        x: 0,
        y: 0,
      })
    return toRefs(pos)
}

// x &amp; y ç°åœ¨æ˜¯ ref å½¢å¼äº†!
const { x, y } = useMousePosition()
</code></pre>
</blockquote>
<h3 id="ref"><a href="#ref" class="headerlink" title="ref"></a><code>ref</code></h3><p>æ¥å—ä¸€ä¸ªå‚æ•°å€¼å¹¶è¿”å›ä¸€ä¸ªå“åº”å¼ä¸”å¯æ”¹å˜çš„ ref å¯¹è±¡ã€‚ref å¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªæŒ‡å‘å†…éƒ¨å€¼çš„å•ä¸€å±æ€§ <code>.value</code></p>
<pre><code class="js">const count = ref(0)
console.log(count.value) // 0
</code></pre>
<blockquote>
<p>å¦‚æœä¼ å…¥ ref çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°†è°ƒç”¨ <code>reactive</code> æ–¹æ³•è¿›è¡Œæ·±å±‚å“åº”è½¬æ¢</p>
</blockquote>
<h4 id="é™·é˜±"><a href="#é™·é˜±" class="headerlink" title="é™·é˜±"></a>é™·é˜±</h4><ul>
<li><code>setup</code> ä¸­<code>return</code>è¿”å›ä¼šè‡ªåŠ¨è§£å¥—ã€åœ¨æ¨¡æ¿ä¸­ä¸éœ€è¦<code>.value</code>ã€‘</li>
</ul>
<ul>
<li><p>ref ä½œä¸º reactive å¯¹è±¡çš„ property è¢«è®¿é—®æˆ–ä¿®æ”¹æ—¶ï¼Œä¹Ÿå°†è‡ªåŠ¨è§£å¥— <code>.value</code></p>
<pre><code class="js">const count = ref(0)
/*å½“åšreactiveçš„å¯¹è±¡å±æ€§----è§£å¥—*/
const state = reactive({
  count,
})
/* ä¸éœ€è¦.value*/
console.log(state.count) // 0

/*ä¿®æ”¹reactiveçš„å€¼*/
state.count = 1
/*ä¿®æ”¹äº†refçš„å€¼*/
console.log(count.value) // 1
</code></pre>
<blockquote>
<p>æ³¨æ„å¦‚æœå°†ä¸€ä¸ªæ–°çš„ ref åˆ†é…ç»™ç°æœ‰çš„ refï¼Œ å°†æ›¿æ¢æ—§çš„ ref</p>
<pre><code class="js">/*åˆ›å»ºä¸€ä¸ªæ–°çš„ref*/
const otherCount = ref(2)

/*èµ‹å€¼ç»™reactiveçš„æ—§çš„refï¼Œæ—§çš„ä¼šè¢«æ›¿æ¢æ‰*/
state.count = otherCount
/*ä¿®æ”¹reactiveä¼šä¿®æ”¹otherCount*/
console.log(state.count) // 2
/*ä¿®æ”¹reactiveä¼šcountæ²¡æœ‰è¢«ä¿®æ”¹ */
console.log(count.value) // 1
</code></pre>
</blockquote>
</li>
<li><p>åµŒå¥—åœ¨ reactive <code>Object</code> ä¸­æ—¶ï¼Œref æ‰ä¼šè§£å¥—ã€‚ä» <code>Array</code> æˆ–è€… <code>Map</code> ç­‰åŸç”Ÿé›†åˆç±»ä¸­è®¿é—® ref æ—¶ï¼Œä¸ä¼šè‡ªåŠ¨è§£å¥—ã€è‡ªç”±æ•°æ®ç±»å‹æ˜¯Objectæ‰ä¼šè§£å¥—ï¼Œ<code>array</code> <code>map</code> <code>set</code>  <code>weakmap</code> <code>weakset</code>é›†åˆç±» <strong>è®¿é—® ref æ—¶ï¼Œä¸ä¼šè‡ªåŠ¨è§£å¥—</strong>ã€‘</p>
<pre><code class="js">const arr = reactive([ref(0)])
// è¿™é‡Œéœ€è¦ .value
console.log(arr[0].value)

const map = reactive(new Map([[&#39;foo&#39;, ref(0)]]))
// è¿™é‡Œéœ€è¦ .value
console.log(map.get(&#39;foo&#39;).value)
</code></pre>
</li>
</ul>
<h4 id="å¿ƒæ™ºè´Ÿæ‹…ä¸Š-ref-vs-reactive"><a href="#å¿ƒæ™ºè´Ÿæ‹…ä¸Š-ref-vs-reactive" class="headerlink" title="å¿ƒæ™ºè´Ÿæ‹…ä¸Š ref  vs  reactive"></a>å¿ƒæ™ºè´Ÿæ‹…ä¸Š <code>ref</code>  vs  <code>reactive</code></h4><ul>
<li>åœ¨æ™®é€š JavaScript ä¸­åŒºåˆ«<code>å£°æ˜åŸºç¡€ç±»å‹å˜é‡</code>ä¸<code>å¯¹è±¡å˜é‡</code>æ—¶ä¸€æ ·åŒºåˆ«ä½¿ç”¨ <code>ref</code> å’Œ <code>reactive</code></li>
<li>æ‰€æœ‰çš„åœ°æ–¹éƒ½ç”¨ <code>reactive</code>ï¼Œç„¶åè®°å¾—åœ¨ç»„åˆå‡½æ•°è¿”å›å“åº”å¼å¯¹è±¡æ—¶ä½¿ç”¨ <code>toRefs</code>ã€‚è¿™é™ä½äº†ä¸€äº›å…³äº ref çš„å¿ƒæ™ºè´Ÿæ‹…</li>
</ul>
<h3 id="readonly"><a href="#readonly" class="headerlink" title="readonly"></a><code>readonly</code></h3><p>ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼ˆå“åº”å¼æˆ–æ™®é€šï¼‰æˆ– refï¼Œè¿”å›ä¸€ä¸ªåŸå§‹å¯¹è±¡çš„<strong>åªè¯»</strong>ä»£ç†ã€‚ä¸€ä¸ªåªè¯»çš„ä»£ç†æ˜¯â€œæ·±å±‚çš„â€ï¼Œå¯¹è±¡å†…éƒ¨ä»»ä½•åµŒå¥—çš„å±æ€§ä¹Ÿéƒ½æ˜¯åªè¯»çš„ã€è¿”å›ä¸€ä¸ªæ°¸è¿œä¸ä¼šå˜çš„åªè¯»ä»£ç†ã€‘ã€åœºæ™¯å¯ä»¥å‚æ•°æ¯”å¯¹ç­‰ã€‘</p>
<pre><code class="js">const original = reactive({ count: 0 })

const copy = readonly(original)

watchEffect(() =&gt; {
  // ä¾èµ–è¿½è¸ª
  console.log(copy.count)
})

// original ä¸Šçš„ä¿®æ”¹ä¼šè§¦å‘ copy ä¸Šçš„ä¾¦å¬
original.count++

// æ— æ³•ä¿®æ”¹ copy å¹¶ä¼šè¢«è­¦å‘Š
copy.count++ // warning!
</code></pre>
<h2 id="reactiveå“åº”å¼ç³»ç»Ÿå·¥å…·é›†"><a href="#reactiveå“åº”å¼ç³»ç»Ÿå·¥å…·é›†" class="headerlink" title="reactiveå“åº”å¼ç³»ç»Ÿå·¥å…·é›†"></a><code>reactive</code>å“åº”å¼ç³»ç»Ÿå·¥å…·é›†</h2><h3 id="isProxy"><a href="#isProxy" class="headerlink" title="isProxy"></a><code>isProxy</code></h3><blockquote>
<p>æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>reactive</code> æˆ–è€… <code>readonly</code> æ–¹æ³•åˆ›å»ºçš„ä»£ç†</p>
</blockquote>
<h3 id="isReactive"><a href="#isReactive" class="headerlink" title="isReactive"></a><code>isReactive</code></h3><blockquote>
<p>æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>reactive</code> åˆ›å»ºçš„å“åº”å¼ä»£ç†</p>
<pre><code class="js">import { reactive, isReactive } from &#39;vue&#39;
const state = reactive({
      name: &#39;John&#39;
    })
console.log(isReactive(state)) // -&gt; true
</code></pre>
</blockquote>
<blockquote>
<p>å¦‚æœè¿™ä¸ªä»£ç†æ˜¯ç”± <code>readonly</code> åˆ›å»ºçš„ï¼Œä½†æ˜¯åˆè¢« <code>reactive</code> åˆ›å»ºçš„å¦ä¸€ä¸ªä»£ç†åŒ…è£¹äº†ä¸€å±‚ï¼Œé‚£ä¹ˆåŒæ ·ä¹Ÿä¼šè¿”å› <code>true</code></p>
<pre><code class="js">import { reactive, isReactive, readonly } from &#39;vue&#39;
const state = reactive({
      name: &#39;John&#39;
    })
// ç”¨readonlyåˆ›å»ºä¸€ä¸ªåªè¯»å“åº”å¼å¯¹è±¡plain
const plain = readonly({
    name: &#39;Mary&#39;
})
//readonlyåˆ›å»ºçš„ï¼Œæ‰€ä»¥isReactiveä¸ºfalse
console.log(isReactive(plain)) // -&gt; false  

// reactiveåˆ›å»ºçš„å“åº”å¼ä»£ç†å¯¹è±¡åŒ…è£¹ä¸€å±‚readonly,isReactiveä¹Ÿæ˜¯true,isReadonlyä¹Ÿæ˜¯true
const stateCopy = readonly(state)
console.log(isReactive(stateCopy)) // -&gt; true
</code></pre>
</blockquote>
<h3 id="isReadonly"><a href="#isReadonly" class="headerlink" title="isReadonly"></a><code>isReadonly</code></h3><blockquote>
<p>æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>readonly</code> åˆ›å»ºçš„åªè¯»ä»£ç†</p>
</blockquote>
<h2 id="reactiveé«˜çº§å“åº”å¼ç³»ç»ŸAPI"><a href="#reactiveé«˜çº§å“åº”å¼ç³»ç»ŸAPI" class="headerlink" title="reactiveé«˜çº§å“åº”å¼ç³»ç»ŸAPI"></a><code>reactive</code>é«˜çº§å“åº”å¼ç³»ç»ŸAPI</h2><h3 id="toRaw"><a href="#toRaw" class="headerlink" title="toRaw"></a><code>toRaw</code></h3><blockquote>
<p>è¿”å›ç”± <code>reactive</code> æˆ– <code>readonly</code> æ–¹æ³•è½¬æ¢æˆå“åº”å¼ä»£ç†çš„æ™®é€šå¯¹è±¡ã€‚è¿™æ˜¯ä¸€ä¸ªè¿˜åŸæ–¹æ³•ï¼Œå¯ç”¨äºä¸´æ—¶è¯»å–ï¼Œè®¿é—®ä¸ä¼šè¢«ä»£ç†/è·Ÿè¸ªï¼Œå†™å…¥æ—¶ä¹Ÿä¸ä¼šè§¦å‘æ›´æ”¹ã€‚ä¸å»ºè®®ä¸€ç›´æŒæœ‰åŸå§‹å¯¹è±¡çš„å¼•ç”¨ã€<code>**ä¸å»ºè®®èµ‹å€¼ç»™ä»»ä½•å˜é‡**</code>ã€‘ã€‚è¯·è°¨æ…ä½¿ç”¨</p>
</blockquote>
<p>è¢«<strong><code>toRaw</code></strong>ä¹‹åçš„å¯¹è±¡æ˜¯æ²¡æœ‰è¢«ä»£ç†/è·Ÿè¸ªçš„çš„æ™®é€šå¯¹è±¡</p>
<pre><code class="js">const foo = {}
const reactiveFoo = reactive(foo)

console.log(toRaw(reactiveFoo) === foo) // true
console.log(toRaw(reactiveFoo) !== reactiveFoo) // true
</code></pre>
<h3 id="markRaw"><a href="#markRaw" class="headerlink" title="markRaw"></a><code>markRaw</code></h3><p>æ˜¾å¼æ ‡è®°ä¸€ä¸ªå¯¹è±¡ä¸ºâ€œæ°¸è¿œä¸ä¼šè½¬ä¸ºå“åº”å¼ä»£ç†â€ï¼Œå‡½æ•°è¿”å›è¿™ä¸ªå¯¹è±¡æœ¬èº«ã€‚</p>
<blockquote>
<p>ã€<code>markRaw</code>ä¼ å…¥å¯¹è±¡ï¼Œè¿”å›çš„å€¼æ˜¯æ°¸è¿œä¸ä¼šè¢«è½¬ä¸ºå“åº”å¼ä»£ç†çš„ã€‘</p>
<pre><code class="js">const foo = markRaw({
    name: &#39;Mary&#39;
})
console.log(isReactive(reactive(foo))) // false
</code></pre>
</blockquote>
<blockquote>
<p>è¢« markRaw æ ‡è®°äº†ï¼Œå³ä½¿åœ¨å“åº”å¼å¯¹è±¡ä¸­ä½œå±æ€§ï¼Œä¹Ÿä¾ç„¶ä¸æ˜¯å“åº”å¼çš„</p>
<pre><code class="js">const bar = reactive({ foo })
console.log(isReactive(bar.foo)) // false
</code></pre>
</blockquote>
<h4 id="markRawæ³¨æ„ç‚¹"><a href="#markRawæ³¨æ„ç‚¹" class="headerlink" title="markRawæ³¨æ„ç‚¹"></a><code>markRaw</code>æ³¨æ„ç‚¹</h4><ul>
<li><p>markRawå’Œ shallowXXX ä¸€æ—çš„ APIå…è®¸<strong>é€‰æ‹©æ€§çš„</strong>è¦†ç›–reactiveæˆ–è€…readonly é»˜è®¤åˆ›å»ºçš„ â€œæ·±å±‚çš„â€ ç‰¹æ€§ã€å“åº”å¼ã€‘/æˆ–è€…ä½¿ç”¨æ— ä»£ç†çš„æ™®é€šå¯¹è±¡</p>
</li>
<li><p>è®¾è®¡è¿™ç§ã€Œæµ…å±‚è¯»å–ã€æœ‰å¾ˆå¤šåŸå› </p>
<ul>
<li>ä¸€äº›å€¼çš„å®é™…ä¸Šçš„ç”¨æ³•éå¸¸ç®€å•ï¼Œå¹¶æ²¡æœ‰å¿…è¦è½¬ä¸ºå“åº”å¼ã€ä¾‹å¦‚ä¸‰æ–¹åº“çš„å®ä¾‹/çœå¸‚åŒºjson/Vueç»„ä»¶å¯¹è±¡ã€‘</li>
<li>å½“æ¸²æŸ“ä¸€ä¸ªå…ƒç´ æ•°é‡åºå¤§ï¼Œä½†æ˜¯æ•°æ®æ˜¯ä¸å¯å˜çš„ï¼Œè·³è¿‡ Proxy çš„è½¬æ¢å¯ä»¥å¸¦æ¥æ€§èƒ½æå‡</li>
</ul>
</li>
<li><p>è¿™äº› API è¢«è®¤ä¸ºæ˜¯é«˜çº§çš„ï¼Œæ˜¯å› ä¸ºè¿™ç§ç‰¹æ€§ä»…åœç•™åœ¨æ ¹çº§åˆ«ï¼Œæ‰€ä»¥å¦‚æœä½ å°†ä¸€ä¸ªåµŒå¥—çš„ï¼Œæ²¡æœ‰ <code>markRaw</code> çš„å¯¹è±¡è®¾ç½®ä¸º reactive å¯¹è±¡çš„å±æ€§ï¼Œåœ¨é‡æ–°è®¿é—®æ—¶ï¼Œä½ åˆä¼šå¾—åˆ°ä¸€ä¸ª Proxy çš„ç‰ˆæœ¬ï¼Œåœ¨ä½¿ç”¨ä¸­æœ€ç»ˆä¼šå¯¼è‡´<strong>æ ‡è¯†æ··æ·†</strong>çš„ä¸¥é‡é—®é¢˜ï¼šæ‰§è¡ŒæŸä¸ªæ“ä½œåŒæ—¶ä¾èµ–äºæŸä¸ªå¯¹è±¡çš„åŸå§‹ç‰ˆæœ¬å’Œä»£ç†ç‰ˆæœ¬ï¼ˆæ ‡è¯†æ··æ·†åœ¨ä¸€èˆ¬ä½¿ç”¨å½“ä¸­åº”è¯¥æ˜¯éå¸¸ç½•è§çš„ï¼Œä½†æ˜¯è¦æƒ³å®Œå…¨é¿å…è¿™æ ·çš„é—®é¢˜ï¼Œå¿…é¡»è¦å¯¹æ•´ä¸ªå“åº”å¼ç³»ç»Ÿçš„å·¥ä½œåŸç†æœ‰ä¸€ä¸ªç›¸å½“æ¸…æ™°çš„è®¤çŸ¥ï¼‰ã€‚</p>
<pre><code class="js">const foo = markRaw({
  nested: {},
})

const bar = reactive({
  // å°½ç®¡ `foo` å·±ç»è¢«æ ‡è®°ä¸º raw äº†, ä½† foo.nested å¹¶æ²¡æœ‰
  nested: foo.nested,
})

console.log(foo.nested === bar.nested) // false
</code></pre>
<ul>
<li>foo.nestedæ²¡æœ‰è¢«æ ‡è®°ä¸º(æ°¸è¿œä¸ä¼šè½¬ä¸ºå“åº”å¼ä»£ç†)ï¼Œå¯¼è‡´æœ€åçš„å€¼ä¸€ä¸ªreactive</li>
</ul>
</li>
</ul>
<h3 id="shallowReactive"><a href="#shallowReactive" class="headerlink" title="shallowReactive"></a><code>shallowReactive</code></h3><p>åªä¸ºæŸä¸ªå¯¹è±¡çš„ç§æœ‰ï¼ˆç¬¬ä¸€å±‚ï¼‰å±æ€§åˆ›å»ºæµ…å±‚çš„å“åº”å¼ä»£ç†ï¼Œä¸ä¼šå¯¹â€œå±æ€§çš„å±æ€§â€åšæ·±å±‚æ¬¡ã€é€’å½’åœ°å“åº”å¼ä»£ç†ï¼Œè€Œåªæ˜¯ä¿ç•™åŸæ ·ã€ç¬¬ä¸€å±‚æ˜¯å“åº”å¼ä»£ç†ï¼Œæ·±å±‚æ¬¡åªä¿ç•™åŸæ ·(ä¸å…·å¤‡å“åº”å¼ä»£ç†)ã€‘</p>
<pre><code class="js">const state = shallowReactive({
  foo: 1,
  nested: {
    bar: 2,
  },
})

// å˜æ›´ state çš„è‡ªæœ‰å±æ€§æ˜¯å“åº”å¼çš„ã€ç¬¬ä¸€å±‚æ¬¡å“åº”å¼ã€‘
state.foo++
// ...ä½†ä¸ä¼šæ·±å±‚ä»£ç†ã€æ·±å±‚æ¬¡ä¸æ˜¯å“åº”å¼ã€‘(æ¸²æŸ“æ€§èƒ½)
isReactive(state.nested) // false
state.nested.bar++ // éå“åº”å¼
</code></pre>
<h3 id="shallowReadonly"><a href="#shallowReadonly" class="headerlink" title="shallowReadonly"></a><code>shallowReadonly</code></h3><p>ç±»ä¼¼äº<code>shallowReactive</code>ï¼ŒåŒºåˆ«æ˜¯ï¼š</p>
<ul>
<li>ç¬¬ä¸€å±‚å°†ä¼šæ˜¯å“åº”å¼ä»£ç†ã€ç¬¬ä¸€å±‚ä¿®æ”¹å±æ€§ä¼šå¤±è´¥ã€‘ï¼Œå±æ€§ä¸ºå“åº”å¼</li>
<li>æ·±å±‚æ¬¡çš„å¯¹è±¡å±æ€§å¯ä»¥ä¿®æ”¹ï¼Œå±æ€§ä¸æ˜¯å“åº”å¼</li>
</ul>
<pre><code class="js">const state = shallowReadonly({
  foo: 1,
  nested: {
    bar: 2,
  },
})

// å˜æ›´ state çš„è‡ªæœ‰å±æ€§ä¼šå¤±è´¥
state.foo++
// ...ä½†æ˜¯åµŒå¥—çš„å¯¹è±¡æ˜¯å¯ä»¥å˜æ›´çš„
isReadonly(state.nested) // false
state.nested.bar++ // åµŒå¥—å±æ€§ä¾ç„¶å¯ä¿®æ”¹
</code></pre>
<h2 id="ref-å“åº”å¼ç³»ç»Ÿå·¥å…·é›†"><a href="#ref-å“åº”å¼ç³»ç»Ÿå·¥å…·é›†" class="headerlink" title="ref å“åº”å¼ç³»ç»Ÿå·¥å…·é›†"></a><code>ref</code> å“åº”å¼ç³»ç»Ÿå·¥å…·é›†</h2><h3 id="unref"><a href="#unref" class="headerlink" title="unref"></a><code>unref</code></h3><p><code>unref</code>æ˜¯<code>val = isRef(val) ? val.value : val</code> çš„è¯­æ³•ç³–</p>
<pre><code class="js">unref(ref(0))===unref(0)===0   è¿”å›number

function useFoo(x: number | Ref&lt;number&gt;) {
  const unwrapped = unref(x) // unwrapped ä¸€å®šæ˜¯ number ç±»å‹
}
</code></pre>
<h3 id="toRef"><a href="#toRef" class="headerlink" title="toRef"></a><code>toRef</code></h3><p><code>toRef</code> å¯ä»¥ç”¨æ¥ä¸ºä¸€ä¸ª reactive å¯¹è±¡çš„<code>å±æ€§</code>ã€æŸä¸ªå±æ€§åŒºåˆ«toRefsæ¯ä¸€ä¸ªå±æ€§ã€‘åˆ›å»ºä¸€ä¸ª refã€‚è¿™ä¸ª ref å¯ä»¥è¢«ä¼ é€’å¹¶ä¸”èƒ½å¤Ÿä¿æŒå“åº”æ€§</p>
<pre><code class="js">const state = reactive({
  foo: 1,
  bar: 2,
})

//reactiveè·å–å•ä¸ªå±æ€§è½¬ä¸ºrefã€fooRefåªæ˜¯ä¸€ä¸ªä»£ç†ã€‘
const fooRef = toRef(state, &#39;foo&#39;)

fooRef.value++
console.log(state.foo) // 2

state.foo++
console.log(fooRef.value) // 3
</code></pre>
<h3 id="toRefs"><a href="#toRefs" class="headerlink" title="toRefs"></a><code>toRefs</code></h3><p>æŠŠä¸€ä¸ªå“åº”å¼å¯¹è±¡è½¬æ¢æˆæ™®é€šå¯¹è±¡ï¼Œè¯¥æ™®é€šå¯¹è±¡çš„æ¯ä¸ª property éƒ½æ˜¯ä¸€ä¸ª ref ï¼Œå’Œå“åº”å¼å¯¹è±¡ property ä¸€ä¸€å¯¹åº”</p>
<pre><code class="js">const state = reactive({
  foo: 1,
  bar: 2,
})

const stateAsRefs = toRefs(state)
/*
stateAsRefs çš„ç±»å‹å¦‚ä¸‹:

{
  foo: Ref&lt;number&gt;,
  bar: Ref&lt;number&gt;
}
*/

// ref å¯¹è±¡ ä¸ åŸå±æ€§çš„å¼•ç”¨æ˜¯ &quot;é“¾æ¥&quot; ä¸Šçš„
state.foo++
console.log(stateAsRefs.foo) // 2

stateAsRefs.foo.value++
console.log(state.foo) // 3
</code></pre>
<blockquote>
<p>å¯ä»¥é€šè¿‡<code>toRefs</code>è¿”å›å¯è§£æ„çš„reactiveï¼Œå› ä¸º<code>toRefs</code>åŒ…è£¹ä¹‹åè¿”å›ä¸€ä¸€å¯¹åº”çš„refå±æ€§</p>
<pre><code class="js">function useFeatureX() {
  const state = reactive({
    foo: 1,
    bar: 2,
  })

  // å¯¹ state çš„é€»è¾‘æ“ä½œ

  // è¿”å›æ—¶å°†å±æ€§éƒ½è½¬ä¸º ref
  return toRefs(state)
}

export default {
  setup() {
    // å¯ä»¥è§£æ„ï¼Œä¸ä¼šä¸¢å¤±å“åº”æ€§
    const { foo, bar } = useFeatureX()

    return {
      foo,
      bar,
    }
  },
}
</code></pre>
</blockquote>
<h3 id="isRef"><a href="#isRef" class="headerlink" title="isRef"></a><code>isRef</code></h3><p>æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºä¸€ä¸ª ref å¯¹è±¡</p>
<h2 id="ref-é«˜çº§å“åº”å¼ç³»ç»ŸAPI"><a href="#ref-é«˜çº§å“åº”å¼ç³»ç»ŸAPI" class="headerlink" title="ref é«˜çº§å“åº”å¼ç³»ç»ŸAPI"></a><code>ref</code> é«˜çº§å“åº”å¼ç³»ç»ŸAPI</h2><h3 id="customRef"><a href="#customRef" class="headerlink" title="customRef"></a><code>customRef</code></h3><p>ç”¨äºè‡ªå®šä¹‰ä¸€ä¸ª <code>ref</code>ï¼Œå¯ä»¥æ˜¾å¼åœ°æ§åˆ¶ä¾èµ–è¿½è¸ªå’Œè§¦å‘å“åº”ï¼Œæ¥å—ä¸€ä¸ªå·¥å‚å‡½æ•°ï¼Œä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ç”¨äºè¿½è¸ªçš„ <code>track</code> ä¸ç”¨äºè§¦å‘å“åº”çš„ <code>trigger</code>ï¼Œå¹¶è¿”å›ä¸€ä¸ªä¸€ä¸ªå¸¦æœ‰ <code>get</code> å’Œ <code>set</code> å±æ€§çš„å¯¹è±¡ã€å®é™…ä¸Šå°±æ˜¯æ‰‹åŠ¨ <code>track</code>è¿½è¸ª å’Œ <code>trigger</code>è§¦å‘å“åº”ã€‘</p>
<ul>
<li>ä»¥ä¸‹ä»£ç å¯ä»¥ä½¿å¾—v-modelé˜²æŠ–</li>
</ul>
<pre><code class="js">function useDebouncedRef(value, delay = 200) {
  let timeout
  return customRef((track, trigger) =&gt; {
    return {
      get() {
          /*åˆå§‹åŒ–æ‰‹åŠ¨è¿½è¸ªä¾èµ–è®²ç©¶ä»€ä¹ˆæ—¶å€™å»è§¦å‘ä¾èµ–æ”¶é›†*/
        track()
        return value
      },
      set(newValue) {
          /*ä¿®æ”¹æ•°æ®çš„æ—¶å€™ä¼šæŠŠä¸Šä¸€æ¬¡çš„å®šæ—¶å™¨æ¸…é™¤ã€é˜²æŠ–ã€‘*/
        clearTimeout(timeout)
        timeout = setTimeout(() =&gt; {
            /*æŠŠæ–°è®¾ç½®çš„æ•°æ®ç»™åˆ°refæ•°æ®æº*/
          value = newValue
            /*å†æœ‰ä¾èµ–è¿½è¸ªçš„å‰æä¸‹è§¦å‘å“åº”å¼*/
          trigger()
        }, delay)
      },
    }
  })
}

setup() {
    return {
        /*æš´éœ²è¿”å›çš„æ•°æ®åŠ é˜²æŠ–*/
      text: useDebouncedRef(&#39;hello&#39;),
    }
  }
</code></pre>
<h3 id="shallowRef"><a href="#shallowRef" class="headerlink" title="shallowRef"></a><code>shallowRef</code></h3><p>åˆ›å»ºä¸€ä¸ª ref ï¼Œå°†ä¼šè¿½è¸ªå®ƒçš„ <code>.value</code> æ›´æ”¹æ“ä½œï¼Œä½†æ˜¯å¹¶ä¸ä¼šå¯¹å˜æ›´åçš„ <code>.value</code> åšå“åº”å¼ä»£ç†è½¬æ¢ï¼ˆå³å˜æ›´ä¸ä¼šè°ƒç”¨ <code>reactive</code>ï¼‰</p>
<blockquote>
<p>å‰é¢æˆ‘ä»¬è¯´è¿‡å¦‚æœä¼ å…¥ ref çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°†è°ƒç”¨ <code>reactive</code> æ–¹æ³•è¿›è¡Œæ·±å±‚å“åº”è½¬æ¢,é€šè¿‡<code>shallowRef</code>åˆ›å»ºçš„ref,å°†ä¸ä¼šè°ƒç”¨reactiveã€å¯¹è±¡ä¸ä¼šæ˜¯å“åº”å¼çš„ã€‘</p>
<pre><code class="js">const refOne = shallowRef({});
refOne.value = { id: 1 };
refOne.id == 20;
console.log(isReactive(refOne.value),refOne.value);//false  { id: 1 }
</code></pre>
</blockquote>
<h3 id="triggerRef-ã€ä¸shallowRefé…åˆã€‘"><a href="#triggerRef-ã€ä¸shallowRefé…åˆã€‘" class="headerlink" title="triggerRef ã€ä¸shallowRefé…åˆã€‘"></a><code>triggerRef</code> ã€ä¸<code>shallowRef</code>é…åˆã€‘</h3><p>æ‰‹åŠ¨æ‰§è¡Œä¸<code>shallowRef</code>ç›¸å…³çš„ä»»ä½•æ•ˆæœ</p>
<pre><code class="js">const shallow = shallowRef({
  greet: &#39;Hello, world&#39;
})

// ç¬¬ä¸€æ¬¡è¿è¡Œæ‰“å° &quot;Hello, world&quot; 
watchEffect(() =&gt; {
  console.log(shallow.value.greet)
})

// è¿™ä¸ä¼šè§¦å‘æ•ˆæœï¼Œå› ä¸ºrefæ˜¯shallow
shallow.value.greet = &#39;Hello, universe&#39;

// æ‰“å° &quot;Hello, universe&quot;
triggerRef(shallow)</code></pre>
<h1 id="Composition-API"><a href="#Composition-API" class="headerlink" title="Composition API"></a>Composition API</h1><h2 id="setup"><a href="#setup" class="headerlink" title="setup"></a>setup</h2><p><code>setup</code> å‡½æ•°æ˜¯ä¸€ä¸ªæ–°çš„ç»„ä»¶é€‰é¡¹ã€‚ä½œä¸ºåœ¨ç»„ä»¶å†…ä½¿ç”¨ <strong>Composition API</strong> çš„å…¥å£ç‚¹</p>
<ul>
<li>æ³¨æ„ <code>setup</code> è¿”å›çš„ ref åœ¨æ¨¡æ¿ä¸­ä¼šè‡ªåŠ¨è§£å¼€ï¼Œä¸éœ€è¦å†™ <code>.value</code>ã€<code>setup</code> å†…éƒ¨éœ€è¦<code>.value</code>ã€‘</li>
</ul>
<h3 id="è°ƒç”¨æ—¶æœº"><a href="#è°ƒç”¨æ—¶æœº" class="headerlink" title="è°ƒç”¨æ—¶æœº"></a>è°ƒç”¨æ—¶æœº</h3><ul>
<li>åˆ›å»ºç»„ä»¶å®ä¾‹ï¼Œç„¶ååˆå§‹åŒ– <code>props</code> ï¼Œç´§æ¥ç€å°±è°ƒç”¨<code>setup</code> å‡½æ•°ã€‚ä»ç”Ÿå‘½å‘¨æœŸé’©å­çš„è§†è§’æ¥çœ‹ï¼Œå®ƒä¼šåœ¨ <code>beforeCreate</code> é’©å­ä¹‹å‰è¢«è°ƒç”¨</li>
<li>å¦‚æœ <code>setup</code> è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™å¯¹è±¡çš„å±æ€§å°†ä¼šè¢«åˆå¹¶åˆ°ç»„ä»¶æ¨¡æ¿çš„æ¸²æŸ“ä¸Šä¸‹æ–‡</li>
</ul>
<h3 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h3><ul>
<li><code>props</code> ä½œä¸ºå…¶ç¬¬ä¸€ä¸ªå‚æ•°</li>
</ul>
<blockquote>
<p>æ³¨æ„ <code>props</code> å¯¹è±¡æ˜¯å“åº”å¼çš„ï¼Œ<code>watchEffect</code> æˆ– <code>watch</code> ä¼šè§‚å¯Ÿå’Œå“åº” <code>props</code> çš„æ›´æ–°</p>
<p><strong>ä¸è¦</strong>è§£æ„ <code>props</code> å¯¹è±¡ï¼Œé‚£æ ·ä¼šä½¿å…¶å¤±å»å“åº”æ€§</p>
</blockquote>
<pre><code class="js">export default {
  props: {
    name: String,
  },
  setup(props) {
    console.log(props.name)
     watchEffect(() =&gt; {
      console.log(`name is: ` + props.name)
    })
  },
}</code></pre>
<ul>
<li><p>ç¬¬äºŒä¸ªå‚æ•°æä¾›äº†ä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ã€ä»åŸæ¥ 2.x ä¸­ <code>this</code> é€‰æ‹©æ€§åœ°æš´éœ²äº†ä¸€äº› propertyï¼ˆattrs/emit/slotsï¼‰ã€‘</p>
<blockquote>
<p><code>attrs</code> å’Œ <code>slots</code> éƒ½æ˜¯å†…éƒ¨ç»„ä»¶å®ä¾‹ä¸Šå¯¹åº”é¡¹çš„ä»£ç†ï¼Œå¯ä»¥ç¡®ä¿åœ¨æ›´æ–°åä»ç„¶æ˜¯æœ€æ–°å€¼ã€‚æ‰€ä»¥å¯ä»¥è§£æ„ï¼Œæ— éœ€æ‹…å¿ƒåé¢è®¿é—®åˆ°è¿‡æœŸçš„å€¼</p>
</blockquote>
<p>ä¸ºä»€ä¹ˆpropsä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Ÿ</p>
<ul>
<li>ç»„ä»¶ä½¿ç”¨ <code>props</code> çš„åœºæ™¯æ›´å¤šï¼Œæœ‰æ—¶å€™ç”šè‡³åªä½¿ç”¨ <code>props</code></li>
<li>å°† <code>props</code> ç‹¬ç«‹å‡ºæ¥ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥è®© TypeScript å¯¹ <code>props</code> å•ç‹¬åšç±»å‹æ¨å¯¼ï¼Œä¸ä¼šå’Œä¸Šä¸‹æ–‡ä¸­çš„å…¶ä»–å±æ€§ç›¸æ··æ·†ã€‚è¿™ä¹Ÿä½¿å¾— <code>setup</code> ã€ <code>render</code> å’Œå…¶ä»–ä½¿ç”¨äº† TSX çš„å‡½æ•°å¼ç»„ä»¶çš„ç­¾åä¿æŒä¸€è‡´</li>
</ul>
<blockquote>
<p><strong><code>this</code> åœ¨ <code>setup()</code> ä¸­ä¸å¯ç”¨</strong>ã€‚ç”±äº <code>setup()</code> åœ¨è§£æ 2.x é€‰é¡¹å‰è¢«è°ƒç”¨ï¼Œ<code>setup()</code> ä¸­çš„ <code>this</code> å°†ä¸ 2.x é€‰é¡¹ä¸­çš„ <code>this</code> å®Œå…¨ä¸åŒã€‚åŒæ—¶åœ¨ <code>setup()</code> å’Œ 2.x é€‰é¡¹ä¸­ä½¿ç”¨ <code>this</code> æ—¶å°†é€ æˆæ··ä¹±</p>
</blockquote>
<pre><code class="js">setup(props, { attrs }) {
    // ä¸€ä¸ªå¯èƒ½ä¹‹åå›è°ƒç”¨çš„ç­¾å
    function onClick() {
      console.log(attrs.foo) // ä¸€å®šæ˜¯æœ€æ–°çš„å¼•ç”¨ï¼Œæ²¡æœ‰ä¸¢å¤±å“åº”æ€§
    }
  }</code></pre>
</li>
</ul>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    æœ€åæ›´æ–°æ—¶é—´ï¼š<time datetime="2022-04-24T07:28:36.341Z" itemprop="dateUpdated">2022-04-24 15:28:36</time>
</span><br>


        
        Happy Coding
        
    </div>
    
    <footer>
        <a href="https://github.com/NollieLeo">
            <img src="/img/avatar.png" alt="Mr.Weng">
            Mr.Weng
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">èµ</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vite/" rel="tag">vite</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/" rel="tag">vue</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://github.com/NollieLeo/2022/04/16/vue2-vue3%E8%BF%81%E7%A7%BB%E8%AE%B0%E5%BD%95/&title=ã€Švue2~vue3è¿ç§»è®°å½•ã€‹ â€” ç¿è€å¸ˆçš„åšå®¢&pic=https://github.com/NollieLeo/img/avatar.png" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://github.com/NollieLeo/2022/04/16/vue2-vue3%E8%BF%81%E7%A7%BB%E8%AE%B0%E5%BD%95/&title=ã€Švue2~vue3è¿ç§»è®°å½•ã€‹ â€” ç¿è€å¸ˆçš„åšå®¢&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://github.com/NollieLeo/2022/04/16/vue2-vue3%E8%BF%81%E7%A7%BB%E8%AE%B0%E5%BD%95/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Švue2~vue3è¿ç§»è®°å½•ã€‹ â€” ç¿è€å¸ˆçš„åšå®¢&url=https://github.com/NollieLeo/2022/04/16/vue2-vue3%E8%BF%81%E7%A7%BB%E8%AE%B0%E5%BD%95/&via=https://github.com/NollieLeo" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://github.com/NollieLeo/2022/04/16/vue2-vue3%E8%BF%81%E7%A7%BB%E8%AE%B0%E5%BD%95/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2022/04/21/tsconfig-json%E5%85%A8%E8%A7%A3%E6%9E%90/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">tsconfig.jsonå…¨è§£æ</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2022/03/26/%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1-electron-node/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">è¿›ç¨‹é€šä¿¡(electron/node)</h4>
      </a>
    </div>
  
</nav>



    




















</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        è°¢è°¢å¤§çˆ·~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/false" alt="æ‰“èµäºŒç»´ç ">
        </div>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        ç«™ç‚¹æ€»è®¿å®¢æ•°ï¼š<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        ç«™ç‚¹æ€»è®¿é—®é‡ï¼š<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>åšå®¢å†…å®¹éµå¾ª <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">çŸ¥è¯†å…±äº« ç½²å - éå•†ä¸šæ€§ - ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…åè®®</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Mr.Weng &copy; 2020 - 2022</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://github.com/NollieLeo/2022/04/16/vue2-vue3%E8%BF%81%E7%A7%BB%E8%AE%B0%E5%BD%95/&title=ã€Švue2~vue3è¿ç§»è®°å½•ã€‹ â€” ç¿è€å¸ˆçš„åšå®¢&pic=https://github.com/NollieLeo/img/avatar.png" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://github.com/NollieLeo/2022/04/16/vue2-vue3%E8%BF%81%E7%A7%BB%E8%AE%B0%E5%BD%95/&title=ã€Švue2~vue3è¿ç§»è®°å½•ã€‹ â€” ç¿è€å¸ˆçš„åšå®¢&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://github.com/NollieLeo/2022/04/16/vue2-vue3%E8%BF%81%E7%A7%BB%E8%AE%B0%E5%BD%95/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Švue2~vue3è¿ç§»è®°å½•ã€‹ â€” ç¿è€å¸ˆçš„åšå®¢&url=https://github.com/NollieLeo/2022/04/16/vue2-vue3%E8%BF%81%E7%A7%BB%E8%AE%B0%E5%BD%95/&via=https://github.com/NollieLeo" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://github.com/NollieLeo/2022/04/16/vue2-vue3%E8%BF%81%E7%A7%BB%E8%AE%B0%E5%BD%95/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <img src="//api.qrserver.com/v1/create-qr-code/?data=https://github.com/NollieLeo/2022/04/16/vue2-vue3%E8%BF%81%E7%A7%BB%E8%AE%B0%E5%BD%95/" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = 'æˆ‘èµ°äº†';
            clearTimeout(titleTime);
        } else {
            document.title = 'æˆ‘æ¥äº†';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
